###################################################
#
#   The buildtools repository is at:
#   https://github.com/foo123/Beeld
#
###################################################

settings ={}
    Xpresion = "Xpresion::"
    RegExp = "RegExp::"
@
    
#plugins =[{}]
#    # include 'doc' plugin from plugins folder
#    "doc" = "!plg:doc"
#@

tasks =[{}]
    
    build =[{}]
        
        src =[]

            !tpl:umd-header.tpl.js  # include a umd-header template
            
            # core Classes (should be included always)
            ./src/FILTER.js
            ./src/core/Filter.js
            ./src/core/Math.js
            ./src/core/Color.js
            ./src/core/Image.js
            ./src/core/Loader.js

            # image loaders for various image formats
            ./src/loaders/HTMLImageLoader.js
            
            # generic Filters
            ./src/filters/CompositeFilter.js
            ./src/filters/CustomFilter.js
            ./src/filters/ColorMatrixFilter.js
            ./src/filters/TableLookupFilter.js
            ./src/filters/DisplacementMapFilter.js
            ./src/filters/GeometricMapFilter.js
            ./src/filters/ConvolutionMatrixFilter.js
            ./src/filters/MorphologicalFilter.js
            ./src/filters/StatisticalFilter.js
            
            !tpl:umd-footer.tpl.js  # include a umd-footer template

        @

        # extract header from this file
        header = ./src/FILTER.js

        # Text replacements
        replace =[{}]
            
            "@@ROOT@@" = "this"
            "@@EXPORTS@@" = "exports"
            "@@VERSION@@" = "0.7"
            "@@DATE@@" = Xpresion::date("Y-m-d H:i:s")
            "@@DEPENDENCIES@@" = "@dependencies: Classy.js, Asynchronous.js"
            "@@USE_STRICT@@" = '"use strict";'
            "@@MODULE_NAME@@" = "FILTER"
            "@@MODULE_DEPENDENCIES@@" = "[ ['Classy', 'Asynchronous'], ['./classy.js', './asynchronous.js'] ]"
            "@@MODULE_ARGUMENTS@@"  = "Classy, Asynchronous"
            
        @


        out = ./build/filter.js
        
    @
    
    build_webgl =[{}]
        
        src =[]

            !tpl:umd-header-plugin.tpl.js  # include a umd-header template
            
            # webgl generic Filters (TODO)
            ./src/webgl/WebGL.js
            ./src/webgl/WebGLFilter.js
            ./src/webgl/ColorMatrixFilter.js
            ./src/webgl/ConvolutionMatrixFilter.js
            ./src/webgl/DisplacementMapFilter.js
            ./src/webgl/GeometricMapFilter.js
            
            # svg and css based generic Filters (TODO)
            ./src/webgl/SVGFilter.js
            ./src/webgl/CSSFilter.js
            
            !tpl:umd-footer.tpl.js  # include a umd-footer template

        @

        # extract header from this file
        header = ./src/webgl/WebGL.js

        # Text replacements
        replace =[{}]
            
            "@@ROOT@@" = "this"
            "@@EXPORTS@@" = "exports"
            "@@VERSION@@" = "0.7"
            "@@DATE@@" = Xpresion::date("Y-m-d H:i:s")
            "@@DEPENDENCIES@@" = "@dependencies: Filter.js"
            "@@USE_STRICT@@" = '"use strict";'
            "@@MODULE_NAME@@" = "FILTER_WEBGL"
            "@@MODULE_DEPENDENCIES@@" = "[ ['FILTER'], ['./filter.js'] ]"
            "@@MODULE_ARGUMENTS@@"  = "FILTER"
            
        @


        out = ./build/filter.webgl.js
        
    @
    
    build_loaders =[{}]
        
        src =[]

            !tpl:umd-header-plugin.tpl.js  # include a umd-header template
            
            # (extra) (native) image loaders for various image formats
            ./src/loaders/Loader.js
            ./src/loaders/TGALoader.js
            ./src/loaders/RGBELoader.js
            ./src/loaders/GIFLoader.js
            
            !tpl:umd-footer.tpl.js  # include a umd-footer template

        @

        # extract header from this file
        header = ./src/loaders/Loader.js

        # Text replacements
        replace =[{}]
            
            "@@ROOT@@" = "this"
            "@@EXPORTS@@" = "exports"
            "@@VERSION@@" = "0.7"
            "@@DATE@@" = Xpresion::date("Y-m-d H:i:s")
            "@@DEPENDENCIES@@" = "@dependencies: Filter.js"
            "@@USE_STRICT@@" = '"use strict";'
            "@@MODULE_NAME@@" = "FILTER_LOADERS"
            "@@MODULE_DEPENDENCIES@@" = "[ ['FILTER'], ['./filter.js'] ]"
            "@@MODULE_ARGUMENTS@@"  = "FILTER"
            
        @


        out = ./build/filter.loaders.js
        
    @
    
    build_interpolation =[{}]
        
        src =[]

            !tpl:umd-header-plugin.tpl.js  # include a umd-header template
            
            # (extra) interpolation routines
            ./src/interpolation/IP.js
            ./src/interpolation/Interpolation.js
            
            !tpl:umd-footer.tpl.js  # include a umd-footer template

        @

        # extract header from this file
        header = ./src/interpolation/IP.js

        # Text replacements
        replace =[{}]
            
            "@@ROOT@@" = "this"
            "@@EXPORTS@@" = "exports"
            "@@VERSION@@" = "0.7"
            "@@DATE@@" = Xpresion::date("Y-m-d H:i:s")
            "@@DEPENDENCIES@@" = "@dependencies: Filter.js"
            "@@USE_STRICT@@" = '"use strict";'
            "@@MODULE_NAME@@" = "FILTER_INTERPOLATION"
            "@@MODULE_DEPENDENCIES@@" = "[ ['FILTER'], ['./filter.js'] ]"
            "@@MODULE_ARGUMENTS@@"  = "FILTER"
            
        @


        out = ./build/filter.interpolation.js
        
    @
    
    build_transform =[{}]
        
        src =[]

            !tpl:umd-header-plugin.tpl.js  # include a umd-header template
            
            # data transforms (fft, etc..) (todo)
            ./src/transform/TF.js
            ./src/transform/Transform.js
            
            !tpl:umd-footer.tpl.js  # include a umd-footer template

        @

        # extract header from this file
        header = ./src/transform/TF.js

        # Text replacements
        replace =[{}]
            
            "@@ROOT@@" = "this"
            "@@EXPORTS@@" = "exports"
            "@@VERSION@@" = "0.7"
            "@@DATE@@" = Xpresion::date("Y-m-d H:i:s")
            "@@DEPENDENCIES@@" = "@dependencies: Filter.js"
            "@@USE_STRICT@@" = '"use strict";'
            "@@MODULE_NAME@@" = "FILTER_TRANSFORM"
            "@@MODULE_DEPENDENCIES@@" = "[ ['FILTER'], ['./filter.js'] ]"
            "@@MODULE_ARGUMENTS@@"  = "FILTER"
            
        @


        out = ./build/filter.transform.js
        
    @
    
    build_machinelearning =[{}]
        
        src =[]

            !tpl:umd-header-plugin.tpl.js  # include a umd-header template
            
            # machine learning, classification, clustering, etc.. (todo)
            ./src/ml/ML.js
            ./src/ml/KMeans.js
            ./src/ml/EM.js
            ./src/ml/MeanShift.js
            
            !tpl:umd-footer.tpl.js  # include a umd-footer template

        @

        # extract header from this file
        header = ./src/ml/ML.js

        # Text replacements
        replace =[{}]
            
            "@@ROOT@@" = "this"
            "@@EXPORTS@@" = "exports"
            "@@VERSION@@" = "0.7"
            "@@DATE@@" = Xpresion::date("Y-m-d H:i:s")
            "@@DEPENDENCIES@@" = "@dependencies: Filter.js"
            "@@USE_STRICT@@" = '"use strict";'
            "@@MODULE_NAME@@" = "FILTER_ML"
            "@@MODULE_DEPENDENCIES@@" = "[ ['FILTER'], ['./filter.js'] ]"
            "@@MODULE_ARGUMENTS@@"  = "FILTER"
            
        @


        out = ./build/filter.ml.js
        
    @
    
    build_plugins =[{}]
        
        src =[]

            # sample FILTER Plugins
            !tpl:umd-header-plugin.tpl.js  # include a umd-header template
            
            ./src/plugins/Plugin.js
            ./src/plugins/Noise.js
            ./src/plugins/PerlinNoise.js
            ./src/plugins/Equalize.js
            ./src/plugins/Pixelate.js
            ./src/plugins/TriangularPixelate.js
            #./src/plugins/HexagonalPixelate.js (TODO)
            ./src/plugins/Halftone.js
            ./src/plugins/Bokeh.js
            ./src/plugins/SeamlessTile.js
            ./src/plugins/FloodFill.js
            ./src/plugins/HSVConverter.js
            #./src/plugins/YCbCrConverter.js
            ./src/plugins/Threshold.js
            ./src/plugins/HueExtractor.js
            ./src/plugins/CannyEdges.js
            ./src/plugins/HaarDetector.js
            ./src/plugins/ChannelCopy.js
            ./src/plugins/AlphaMask.js
            ./src/plugins/Blend.js
            #./src/plugins/RGBSplit.js
            
            !tpl:umd-footer.tpl.js  # include a umd-footer template

        @

        # extract header from this file
        header = ./src/plugins/Plugin.js

        # Text replacements
        replace =[{}]
            
            "@@ROOT@@" = "this"
            "@@EXPORTS@@" = "exports"
            "@@VERSION@@" = "0.7"
            "@@DATE@@" = Xpresion::date("Y-m-d H:i:s")
            "@@DEPENDENCIES@@" = "@dependencies: Filter.js"
            "@@USE_STRICT@@" = '"use strict";'
            "@@MODULE_NAME@@" = "FILTER_PLUGINS"
            "@@MODULE_DEPENDENCIES@@" = "[ ['FILTER'], ['./filter.js'] ]"
            "@@MODULE_ARGUMENTS@@"  = "FILTER"
            
        @


        out = ./build/filter.plugins.js
        
    @
    
    minify =[{}]
        
        src =[]

            ./build/filter.js

        @


        # extract documentation from the source (map)
        #doc ={}
        #
        #    "startdoc" = "/**[DOC_MARKDOWN]"
        #    "enddoc" = "[/DOC_MARKDOWN]**/"
        #    "trim" = "\\s*\\*[ ]?"
        #    "output" = "./filter-reference.md"
        #    
        #@


        # Minify the Package (map of lists)
        minify ={}

            # Options for Node UglifyJS Compiler (if used, default), (mangle and compress)
            uglifyjs =[]
                -m -c
            @
        @

        out = ./build/filter.min.js
    
    @
    
    minify_plugins =[{}]
        
        src =[]

            ./build/filter.plugins.js

        @


        # extract documentation from the source (map)
        #doc ={}
        #
        #    "startdoc" = "/**[DOC_MARKDOWN]"
        #    "enddoc" = "[/DOC_MARKDOWN]**/"
        #    "trim" = "\\s*\\*[ ]?"
        #    "output" = "./plugin-reference.md"
        #
        #@


        # Minify the Package (map of lists)
        minify ={}

            # Options for Node UglifyJS Compiler (if used, default), (mangle and compress)
            uglifyjs =[]
                -m -c
            @
        @


        out = ./build/filter.plugins.min.js
    
    @
    
    bundle =[{}]
        
        bundle =[]

            ./build/classy.js
            ./build/asynchronous.js
            ./build/filter.js
            #./build/filter.webgl.js
            #./build/filter.loaders.js
            #./build/filter.interpolation.js
            #./build/filter.transform.js
            #./build/filter.ml.js
            ./build/filter.plugins.js

        @


        out = ./build/filter.bundle.js
    
    @

@
