/**
*
*   FILTER.js MachineLearning Routines
*   @version: 0.9.6
*   @dependencies: Filter.js
*
*   JavaScript Image Processing Library (Machine Learning Routines)
*   https://github.com/foo123/FILTER.js
*
**/!function(e,r){"use strict";"object"==typeof module&&module.exports?module.exports=r.call(e,module.$deps&&module.$deps.FILTER||require("./FILTER".toLowerCase())):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified("FILTER_ML")?define("FILTER_ML",["module","FILTER"],function(n,o){return r.moduleUri=n.uri,r.call(e,o),o}):(r.call(e,e.FILTER)||1)&&"function"==typeof define&&define.amd&&define(function(){return e.FILTER})}(this,function(e){return!function(e,r){"use strict";function n(e,r){for(;r[e][1]!==e;)r[e][1]=r[r[e][1]][1],e=r[e][1];return e}function o(e,r,o){var f=n(e,o),t=n(r,o);f!==t&&(o[f][1]=t)}function f(e,r,n){var o=n.next;return o+1>n.length&&Array.prototype.push.apply(n,new Array(p)),n[o]=[o,o,0],++n.next,o}function t(e,r,t,i,u,c,l,s,h){var m,y,L,M,g,v,w,x,A,I,E,F=r.length,R=F>>>e,T=8===c,b=T?-1:0,k=null,q=null!=h;for(w=new Array(p),w.next=0,x=new a(R),k=q?f(0,0,w):null,x[0]=q&&d(t[0]-h)>s?k:f(0,0,w),L=1;i>L;L++)x[L]=q&&d(t[L]-h)>s?k:d(t[L]-t[L-1])<=s?x[L-1]:f(L,0,w);for(M=1,v=i;u>M;M++,v+=i)for(x[v]=q&&d(t[v]-h)>s?k:d(t[v]-t[v-i])<=s?x[v-i]:f(0,M,w),L=1;i>L;L++)if(q&&d(t[v+L]-h)>s)x[v+L]=k;else{for(y=k===x[v+L-1]?-1:d(t[v+L]-t[v+L-1])<=s?x[v+L-1]:-1,g=b;1>g;g++)k!==x[v-i+L+g]&&d(t[v+L]-t[v-i+L+g])<=s&&(y>=0?o(y,x[v-i+L+g],w):y=x[v-i+L+g]);x[v+L]=y>=0?y:f(L,M,w),T&&k!==x[v+L-1]&&k!==x[v-i+L]&&d(t[v+L-1]-t[v-i+L])<=s&&o(x[v+L-1],x[v-i+L],w)}if(0===k)for(m=0,A=w.next,I=0;A>m;m++)m===w[m][1]&&(w[m][2]=0===w[m][1]?0:++I);else for(m=0,A=w.next,I=0;A>m;m++)m===w[m][1]&&(w[m][2]=I++);if(I=I>0?I:1,l)if(e)for(L=0,m=0;F>m;m+=4,L++)E=w[n(x[L],w)][2],E=255-255*E/I|0,r[m]=r[m+1]=r[m+2]=E;else for(L=0;F>L;L++)E=w[n(x[L],w)][2],E=255-255*E/I|0,r[L]=E;else if(e)for(L=0,m=0;F>m;m+=4,L++)E=w[n(x[L],w)][2],E=255*E/I|0,r[m]=r[m+1]=r[m+2]=E;else for(L=0;F>L;L++)E=w[n(x[L],w)][2],E=255*E/I|0,r[L]=E;return r}function i(e,r,n,o,f,t,i,p,h,m){var y,L,M,g,v,w,x,A,I,E,F,R,T,b,k,q=i.length,_=q>>>2,U=p<<2,$=0,j=q-U,C=0,z=p-1<<2;for(y=e,L=r,M=e,g=r,k=new a(c(_/32)),R=new u(_<<2),T=0,k[e+r>>>7]|=1<<(e+r>>>2&31),r+U>=$&&j>=r+U&&(R[T]=r,R[T+1]=e,R[T+2]=e,R[T+3]=U,T+=4),R[T]=r+U,R[T+1]=e,R[T+2]=e,R[T+3]=-U,T+=4;T>0;){for(T-=4,U=R[T+3],F=R[T]+U,I=R[T+1],E=R[T+2],L=l(L,F),g=s(g,F),y=l(y,I),M=s(M,E),A=I;A>=C&&(w=A+F,x=w>>>2,!(k[x>>>5]&1<<(31&x))&&d(n-i[w])<=m&&d(o-i[w+1])<=m&&d(f-i[w+2])<=m);A-=4)k[x>>>5]|=1<<(31&x),y=l(y,A);if(A>=I){for(w=A+F,x=w>>>2;E>=A&&(k[x>>>5]&1<<(31&x)||d(n-i[w])>m||d(o-i[w+1])>m||d(f-i[w+2])>m);)A+=4,w=A+F,x=w>>>2;v=A,b=E>=A}else v=A+4,I>v&&F-U>=$&&j>=F-U&&(R[T]=F,R[T+1]=v,R[T+2]=I-4,R[T+3]=-U,T+=4),A=I+4,b=!0;for(;b;){for(w=A+F,x=w>>>2;z>=A&&!(k[x>>>5]&1<<(31&x))&&d(n-i[w])<=m&&d(o-i[w+1])<=m&&d(f-i[w+2])<=m;)k[x>>>5]|=1<<(31&x),M=s(M,A),A+=4,w=A+F,x=w>>>2;for(F+U>=$&&j>=F+U&&(R[T]=F,R[T+1]=v,R[T+2]=A-4,R[T+3]=U,T+=4),A>E+4&&F-U>=$&&j>=F-U&&(R[T]=F,R[T+1]=E+4,R[T+2]=A-4,R[T+3]=-U,T+=4),w=A+F,x=w>>>2;E>=A&&(k[x>>>5]&1<<(31&x)||d(n-i[w])>m||d(o-i[w+1])>m||d(f-i[w+2])>m);)A+=4,w=A+F,x=w>>>2;v=A,b=E>=A}}return t[0]=y,t[1]=L,t[2]=M,t[3]=g,k}var u=e.Array32I,a=e.Array32U,c=(e.Array8U,Math.ceil),l=Math.min,s=Math.max,d=Math.abs,p=20;e.MachineLearning.connected_components=t,e.MachineLearning.connected_component=i}(e),!function(e,r){"use strict";var n=Math.abs;e.MachineLearning.kmeans=function(e,r,o,f,t,i){i=i||0;for(var u,a,c,l,s,d,p,h,m=r.length,y=new Array(m);;){for(p=0,a=0;m>a;a++){for(s=r[a],l=f(o[0],s),d=0,u=1;e>u;u++)c=f(o[u],s),l>c&&(l=c,d=u);y[a]=d,p+=l}for(u=0;e>u;u++)o[u]=null;for(a=0;m>a;a++)s=r[a],d=y[a],o[d]=t(o[d],s);for(h=0,a=0;m>a;a++)h+=f(o[y[a]],r[a]);if(n(h-p)<=i)break}return y},e.MachineLearning.kmedoids=function(e,r,o,f,t){t=t||0;for(var i,u,a,c,l,s,d,p,h,m,y,L,M=r.length,g=new Array(M);;){for(m=0,u=0;M>u;u++){for(s=r[u],l=f(o[0],s),h=0,i=1;e>i;i++)c=f(o[i],s),l>c&&(l=c,h=i);g[u]=h,m+=l}for(i=0,L=!1;e>i&&!L;){for(d=o[i],u=0;M>u;u++)if(p=r[u],p!==o[g[u]]){for(o[i]=p,y=0,a=0;M>a;a++)y+=f(o[g[a]],r[a]);if(n(y)+t<n(m)){L=!0;break}o[i]=d}i++}if(!L)break}return g}}(e),e});