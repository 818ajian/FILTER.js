/**
*
*   FILTER.js MachineLearning Routines
*   @version: 0.9.6
*   @dependencies: Filter.js
*
*   JavaScript Image Processing Library (Machine Learning Routines)
*   https://github.com/foo123/FILTER.js
*
**/!function(e,n){"use strict";"object"==typeof module&&module.exports?module.exports=n.call(e,module.$deps&&module.$deps.FILTER||require("./FILTER".toLowerCase())):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified("FILTER_ML")?define("FILTER_ML",["module","FILTER"],function(r,o){return n.moduleUri=r.uri,n.call(e,o),o}):(n.call(e,e.FILTER)||1)&&"function"==typeof define&&define.amd&&define(function(){return e.FILTER})}(this,function(e){return!function(e,n){"use strict";function r(e,n){for(;n[e][1]!==e;)n[e][1]=n[n[e][1]][1],e=n[e][1];return e}function o(e,n,o){var f=r(e,o),t=r(n,o);f!==t&&(o[f][1]=t)}function f(e,n,r){var o=r.next;return o+1>r.length&&Array.prototype.push.apply(r,new Array(a)),r[o]=[o,o,0],++r.next,o}function t(e,n,t,c,l,s,d,p,m){var h,y,L,M,x,g,v,E,F,I,R,T,b,w=n.length,A=w>>>2,k=t<<2,q=8===l,_=q?-1:0,U=4*_,$=null,j=null!=m;for(F=new Array(a),F.next=0,I=new i(A),$=j?f(0,0,F):null,I[0]=j&&u(d[0]-m)>p?$:f(0,0,F),x=1,h=4;t>x;x++,h+=4)I[x]=j&&u(d[x]-m)>p?$:u(d[x]-d[x-1])<=p?I[x-1]:f(x,0,F);for(g=1,E=t,h=k;c>g;g++,E+=t,h+=k)for(I[E]=j&&u(d[E]-m)>p?$:u(d[E]-d[E-t])<=p?I[E-t]:f(0,g,F),x=1,y=4;t>x;x++,y+=4)if(j&&u(d[E+x]-m)>p)I[E+x]=$;else{for(M=$===I[E+x-1]?-1:u(d[E+x]-d[E+x-1])<=p?I[E+x-1]:-1,v=_,L=U;1>v;v++,L+=4)$!==I[E-t+x+v]&&u(d[E+x]-d[E-t+x+v])<=p&&(M>=0?o(M,I[E-t+x+v],F):M=I[E-t+x+v]);I[E+x]=M>=0?M:f(x,g,F),q&&$!==I[E+x-1]&&$!==I[E-t+x]&&u(d[E+x-1]-d[E-t+x])<=p&&o(I[E+x-1],I[E-t+x],F)}if(0===$)for(h=0,R=F.next,T=0;R>h;h++)h===F[h][1]&&(F[h][2]=0===F[h][1]?0:++T);else for(h=0,R=F.next,T=0;R>h;h++)h===F[h][1]&&(F[h][2]=T++);if(T=T>0?T:1,s)for(x=0,h=0;w>h;h+=4,x++)b=F[r(I[x],F)][2],b=255-255*b/T|0,e[h]=b,e[h+1]=b,e[h+2]=b,e[h+3]=n[h+3];else for(x=0,h=0;w>h;h+=4,x++)b=F[r(I[x],F)][2],b=255*b/T|0,e[h]=b,e[h+1]=b,e[h+2]=b,e[h+3]=n[h+3];return e}var i=e.Array32U,u=(Math.min,Math.max,Math.abs),a=20;e.MachineLearning.connected_components=t}(e),!function(e,n){"use strict";var r=Math.abs;e.MachineLearning.kmeans=function(e,n,o,f,t,i){i=i||0;for(var u,a,c,l,s,d,p,m,h=n.length,y=new Array(h);;){for(p=0,a=0;h>a;a++){for(s=n[a],l=f(o[0],s),d=0,u=1;e>u;u++)c=f(o[u],s),l>c&&(l=c,d=u);y[a]=d,p+=l}for(u=0;e>u;u++)o[u]=null;for(a=0;h>a;a++)s=n[a],d=y[a],o[d]=t(o[d],s);for(m=0,a=0;h>a;a++)m+=f(o[y[a]],n[a]);if(r(m-p)<=i)break}return y},e.MachineLearning.kmedoids=function(e,n,o,f,t){t=t||0;for(var i,u,a,c,l,s,d,p,m,h,y,L,M=n.length,x=new Array(M);;){for(h=0,u=0;M>u;u++){for(s=n[u],l=f(o[0],s),m=0,i=1;e>i;i++)c=f(o[i],s),l>c&&(l=c,m=i);x[u]=m,h+=l}for(i=0,L=!1;e>i&&!L;){for(d=o[i],u=0;M>u;u++)if(p=n[u],p!==o[x[u]]){for(o[i]=p,y=0,a=0;M>a;a++)y+=f(o[x[a]],n[a]);if(r(y)+t<r(h)){L=!0;break}o[i]=d}i++}if(!L)break}return x}}(e),e});