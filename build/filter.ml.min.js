/**
*
*   FILTER.js MachineLearning Routines
*   @version: 0.9.6
*   @dependencies: Filter.js
*
*   JavaScript Image Processing Library (Machine Learning Routines)
*   https://github.com/foo123/FILTER.js
*
**/!function(e,n){"use strict";"object"==typeof module&&module.exports?module.exports=n.call(e,module.$deps&&module.$deps.FILTER||require("./FILTER".toLowerCase())):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified("FILTER_ML")?define("FILTER_ML",["module","FILTER"],function(r,o){return n.moduleUri=r.uri,n.call(e,o),o}):(n.call(e,e.FILTER)||1)&&"function"==typeof define&&define.amd&&define(function(){return e.FILTER})}(this,function(e){return!function(e,n){"use strict";function r(e,n){for(;n[e][1]!==e;)n[e][1]=n[n[e][1]][1],e=n[e][1];return e}function o(e,n,o){var f=r(e,o),t=r(n,o);f!==t&&(o[f][1]=t)}function f(e,n,r){var o=r.next;return o+1>r.length&&Array.prototype.push.apply(r,new Array(u)),r[o]=[o,o,0],++r.next,o}function t(e,n,t,a,c,l,d,s,p){var m,y,L,h,x,M,g,v,E,F,I,R,T,w=n.length,A=w>>>2,b=t<<2,k=8===c,q=k?-1:0,_=4*q,U=null,$=null!=s;for(E=new Array(u),E.next=0,F=new i(A),U=$?f(0,0,E):null,F[0]=$&&!s(n,0,p)?U:f(0,0,E),x=1,m=4;t>x;x++,m+=4)F[x]=$&&!s(n,m,p)?U:d(n,m,m-4,p)?F[x-1]:f(x,0,E);for(M=1,v=t,m=b;a>M;M++,v+=t,m+=b)for(F[v]=$&&!s(n,m,p)?U:d(n,m,m-b,p)?F[v-t]:f(0,M,E),x=1,y=4;t>x;x++,y+=4)if(!$||s(n,m+y,p)){for(h=U===F[v+x-1]?-1:d(n,m+y,m+y-4,p)?F[v+x-1]:-1,g=q,L=_;1>g;g++,L+=4)U!==F[v-t+x+g]&&d(n,m+y,m-b+y+L,p)&&(h>=0?o(h,F[v-t+x+g],E):h=F[v-t+x+g]);F[v+x]=h>=0?h:f(x,M,E),k&&U!==F[v+x-1]&&U!==F[v-t+x]&&d(n,m+y-4,m-b+y,p)&&o(F[v+x-1],F[v-t+x],E)}else F[v+x]=U;if(0===U)for(m=0,I=E.next,R=0;I>m;m++)m===E[m][1]&&(E[m][2]=0===E[m][1]?0:++R);else for(m=0,I=E.next,R=0;I>m;m++)m===E[m][1]&&(E[m][2]=R++);if(R=R>0?R:1,l)for(x=0,m=0;w>m;m+=4,x++)T=E[r(F[x],E)][2],T=255-255*T/R|0,e[m]=T,e[m+1]=T,e[m+2]=T,e[m+3]=n[m+3];else for(x=0,m=0;w>m;m+=4,x++)T=E[r(F[x],E)][2],T=255*T/R|0,e[m]=T,e[m+1]=T,e[m+2]=T,e[m+3]=n[m+3];return e}var i=e.Array32U,u=(Math.min,Math.max,20);e.MachineLearning.connected_components=t}(e),!function(e,n){"use strict";var r=Math.abs;e.MachineLearning.kmeans=function(e,n,o,f,t,i){i=i||0;for(var u,a,c,l,d,s,p,m,y=n.length,L=new Array(y);;){for(p=0,a=0;y>a;a++){for(d=n[a],l=f(o[0],d),s=0,u=1;e>u;u++)c=f(o[u],d),l>c&&(l=c,s=u);L[a]=s,p+=l}for(u=0;e>u;u++)o[u]=null;for(a=0;y>a;a++)d=n[a],s=L[a],o[s]=t(o[s],d);for(m=0,a=0;y>a;a++)m+=f(o[L[a]],n[a]);if(r(m-p)<=i)break}return L},e.MachineLearning.kmedoids=function(e,n,o,f,t){t=t||0;for(var i,u,a,c,l,d,s,p,m,y,L,h,x=n.length,M=new Array(x);;){for(y=0,u=0;x>u;u++){for(d=n[u],l=f(o[0],d),m=0,i=1;e>i;i++)c=f(o[i],d),l>c&&(l=c,m=i);M[u]=m,y+=l}for(i=0,h=!1;e>i&&!h;){for(s=o[i],u=0;x>u;u++)if(p=n[u],p!==o[M[u]]){for(o[i]=p,L=0,a=0;x>a;a++)L+=f(o[M[a]],n[a]);if(r(L)+t<r(y)){h=!0;break}o[i]=s}i++}if(!h)break}return M}}(e),e});