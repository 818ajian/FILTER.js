/**
*
*   FILTER.js
*   @version: 0.9.6
*   @built on 2016-08-31 21:24:07
*   @dependencies: Classy.js, Asynchronous.js
*
*   JavaScript Image Processing Library
*   https://github.com/foo123/FILTER.js
*
**/!function(t,e,r){"use strict";function n(t,e,r,n){return t?e.map(function(e,a){return(r?t[a]:t[e])||(n?n(e):null)}):[]}var a="Classy,Asynchronous".split(/\s*,\s*/);"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[e]=r.apply(t,n(module.$deps,a,!1,function(t){return require("./"+t.toLowerCase())}))):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["module"].concat(a),function(e){return r.moduleUri=e.uri,r.apply(t,n(Array.prototype.slice.call(arguments,1),a,!0))}):e in t||(t[e]=r.apply(t,n(t,a)))&&"function"==typeof define&&define.amd&&define(function(){return t[e]})}(this,"FILTER",function e(r,n){"use strict";var a={VERSION:"0.9.6",Classy:r,Asynchronous:n,Class:r.Class,Path:n.path(e.moduleUri)};return!function(t,e,r){var n,a="prototype",i="hasOwnProperty",o=Object.keys,s=(Object[a],Function[a],Array[a]),l=e.Path,u=e.Classy.Merge,h=e.Asynchronous,f=h.isPlatform(h.Platform.NODE),c=h.isPlatform(h.Platform.BROWSER),d=h.supportsMultiThreading(),g=h.isThread(null,!0),p=h.isThread(),m="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"",v="undefined"!=typeof navigator&&navigator.platform?navigator.platform:"",_="undefined"!=typeof navigator&&navigator.vendor?navigator.vendor:"",y=function(){},w=function(t){return function e(){var r=this;return r instanceof e?(r.$super("constructor"),void t.apply(r,1===arguments.length&&!0===arguments[0].__arguments__?arguments[0]:arguments)):arguments.length?(arguments.__arguments__=!0,new e(arguments)):new e}},C=(e.devicePixelRatio=(c&&!p?window.devicePixelRatio:1)||1,e._notSupportClamp="undefined"==typeof Uint8ClampedArray),I=0,A=Math.min,R=Math.max,b=e.Browser={isNode:f,isBrowser:c,isWorker:g,isInsideWorker:p,supportsWorker:d,isPhantom:/PhantomJS/.test(m),isOpera:c&&/Opera|OPR\//.test(m),isFirefox:c&&/Firefox\//.test(m),isChrome:c&&/Chrome\//.test(m),isSafari:c&&/Apple Computer/.test(_),isKhtml:c&&/KHTML\//.test(m),isIE:c&&(/MSIE \d/.test(m)||/Trident\/\d/.test(m)),isGecko:c&&/gecko\/\d/i.test(m),isWebkit:c&&/WebKit\//.test(m),isMac_geLion:c&&/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(m),isMac_geMountainLion:c&&/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(m),isMobile:!1,isIOS:/AppleWebKit/.test(m)&&/Mobile\/\w+/.test(m),isWin:/windows/i.test(v),isMac:!1,isIE_lt8:!1,isIE_lt9:!1,isQtWebkit:!1};b.isMobile=b.isIOS||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(m),b.isMac=b.isIOS||/Mac/.test(v),b.isIE_lt8=b.isIE&&!p&&(null==document.documentMode||document.documentMode<8),b.isIE_lt9=b.isIE&&!p&&(null==document.documentMode||document.documentMode<9),b.isQtWebkit=b.isWebkit&&/Qt\/\d+\.\d+/.test(m),e.getPath=h.path,e.uuid=function(t){return[t||"filter",(new Date).getTime(),++I].join("_")},e.Array=Array,e.Array32F="undefined"!=typeof Float32Array?Float32Array:Array,e.Array64F="undefined"!=typeof Float64Array?Float64Array:Array,e.Array8I="undefined"!=typeof Int8Array?Int8Array:Array,e.Array16I="undefined"!=typeof Int16Array?Int16Array:Array,e.Array32I="undefined"!=typeof Int32Array?Int32Array:Array,e.Array8U="undefined"!=typeof Uint8Array?Uint8Array:Array,e.Array16U="undefined"!=typeof Uint16Array?Uint16Array:Array,e.Array32U="undefined"!=typeof Uint32Array?Uint32Array:Array,e.ImArray=C?e.Array8U:Uint8ClampedArray,e.ImArrayCopy=b.isOpera?e.Array8U:e.ImArray,e.ColorTable=e.ImArrayCopy,e.AffineMatrix=e.ColorMatrix=e.ConvolutionMatrix=e.Array32F,e.MODE={IGNORE:0,WRAP:1,CLAMP:2,COLOR:3,COLOR32:3,TILE:4,STRETCH:5,INTENSITY:6,HUE:7,SATURATION:8,GRAY:9,GRAYSCALE:9,RGB:10,RGBA:11,HSV:12,CMY:13,CMYK:13,PATTERN:14,COLOR8:15,COLORMASK:16,COLORMASK32:16,COLORMASK8:17,MATRIX:18,LINEAR:19,RADIAL:20,NONLINEAR:21,STATISTICAL:22,ADAPTIVE:23,THRESHOLD:24,HISTOGRAM:25,MONO:26,MASK:27},e.CHANNEL={R:0,G:1,B:2,A:3,RED:0,GREEN:1,BLUE:2,ALPHA:3,Y:1,CB:2,CR:0,IP:0,Q:2,INPHASE:0,QUADRATURE:2,H:0,S:2,V:1,I:1,U:2,HUE:0,SATURATION:2,INTENSITY:1,CY:2,MA:0,YE:1,K:3,CYAN:2,MAGENTA:0,YELLOW:1,BLACK:3},e.STRIDE={CHANNEL:[0,0,1],X:[0,1,4],Y:[1,0,4],RGB:[0,1,2],ARGB:[3,0,1,2],RGBA:[0,1,2,3],BGR:[2,1,0],ABGR:[3,2,1,0],BGRA:[2,1,0,3]},e.LUMA=e.LUMA_YUV=e.LUMA_YIQ=new e.Array32F([.2126,.7152,.0722]),e.LUMA_YCbCr=new e.Array32F([.299,.587,.114]),e.LUMA_GREEN=new e.Array32F([0,1,0]),e.CONSTANTS=e.CONST={X:0,Y:1,Z:2,PI:Math.PI,PI2:2*Math.PI,PI_2:Math.PI/2,toRad:Math.PI/180,toDeg:180/Math.PI},e.FORMAT={IMAGE:1024,DATA:2048,PNG:2,JPG:3,JPEG:4,GIF:5,BMP:6,TGA:7,RGBE:8},e.MIME={PNG:"image/png",JPG:"image/jpeg",JPEG:"image/jpeg",GIF:"image/gif",BMP:"image/bmp"},C=e._notSupportClamp=C||b.isOpera,e.Util={String:{},Array:{hasClampedArray:"undefined"!=typeof Uint8ClampedArray,hasArrayset:"undefined"!=typeof Int16Array&&"function"==typeof Int16Array[a].set,hasSubarray:"function"==typeof e.Array32F[a].subarray},IO:{},Filter:{},Image:{},GLSL:{}},e.IO={},e.Codec={},e.Interpolation={},e.Transform={},e.MachineLearning={},e.GLSL={},e.SVG={},e.NotImplemented=function(t){return t?function(){throw new Error('Method "'+t+'" not Implemented!')}:function(){throw new Error("Method not Implemented!")}},n=e.log=g?h.log:"undefine"!=typeof console&&console.log?function(t){console.log(t)}:function(t){},e.warning=function(t){n("WARNING: "+t)},e.error=function(t,e){if(n("ERROR: "+t),e)throw new Error(t)};var M=e.FilterThread=e.Class(h,{path:l,name:null,_listener:null,_rand:null,constructor:function(){var t=this,r=null;g&&t.initThread().listen("load",function(t){t&&t.filter&&(r&&(r.dispose(!0),r=null),r=h.load("FILTER."+t.filter))}).listen("import",function(t){t&&t["import"]&&t["import"].length&&h.importScripts(t["import"].join?t["import"].join(","):t["import"])}).listen("apply",function(n){if(r&&n&&n.im){var a=n.im;a[0]=e.Util.Array.typed(a[0],e.ImArray),n.params&&r.unserializeFilter(n.params),n.inputs&&r.unserializeInputs(n.inputs,a),a=r._apply(a[0],a[1],a[2]),t.send("apply",{im:r._update?a:!1,meta:r.hasMeta?r.metaData(!0):null})}else t.send("apply",{im:null})}).listen("dispose",function(e){r&&(r.dispose(!0),r=null),t.dispose(!0)})},dispose:function(t){var e=this;return e.path=null,e.name=null,e._rand=null,e._listener&&(e._listener.cb=null,e._listener=null),e.$super("dispose",t),e},thread:function(t,e){var r=this;return arguments.length||(t=!0),t=!!t,t&&!r.$thread?(null===r._rand&&(r._rand=f?"":(-1===r.path.file.indexOf("?")?"?":"&")+(new Date).getTime()),r.fork("FILTER.FilterThread",l.file!==r.path.file?[l.file,r.path.file+r._rand]:r.path.file+r._rand),e&&e.length&&r.send("import",{"import":e.join?e.join(","):e}),r.send("load",{filter:r.name}),r.listen("apply",r._listener=function n(t){n.cb&&n.cb(t)})):!t&&r.$thread&&(r._listener.cb=null,r._listener=null,r.unfork()),r},sources:function(){if(!arguments.length)return this;var t=arguments[0]instanceof Array?arguments[0]:s.slice.call(arguments);if(t.length){var e,r=[];for(e=0;e<t.length;e++)r.push(h.blob("function"==typeof t[e]?t[e].toString():t[e]));this.send("import",{"import":r.join(",")})}return this},scripts:function(){if(!arguments.length)return this;var t=arguments[0]instanceof Array?arguments[0]:s.slice.call(arguments);return t.length&&this.send("import",{"import":t.join(",")}),this}}),D=e.Filter=e.Class(M,{name:"Filter",constructor:function(){var t=this;t.inputs={},t.meta=null},_isOn:!0,_update:!0,id:null,onComplete:null,mode:0,selection:null,inputs:null,hasInputs:!1,meta:null,hasMeta:!1,dispose:function(){var t=this;return t.name=null,t.id=null,t._isOn=null,t._update=null,t.onComplete=null,t.mode=null,t.selection=null,t.inputs=null,t.hasInputs=null,t.meta=null,t.hasMeta=null,t.$super("dispose"),t},worker:M[a].thread,metaData:function(t,e){return this.meta},getMetaData:null,setMetaData:function(t,e){return this.meta=t,this},setInput:function(t,e){var r=this;return t=String(t),null===e?r.inputs[t]&&delete r.inputs[t]:r.inputs[t]=[null,e,e.nref],r},unsetInput:function(t){var e=this;return t=String(t),e.inputs[t]&&delete e.inputs[t],e},delInput:null,resetInputs:function(){return this.inputs={},this},input:function(t){var e=this.inputs[String(t)];return e?((null==e[0]||e[1]&&e[2]!==e[1].nref)&&(e[2]=e[1].nref,e[0]=e[1].getSelectedData(1)),e[0]||null):null},getInput:null,serialize:function(){return null},unserialize:function(t){return this},serializeInputs:function(t){if(!this.hasInputs)return null;var e,r,n,a=this.inputs,i=o(a),s=i.length;if(!s)return null;for(n={},r=0;s>r;r++)e=a[i[r]],(null==e[0]||e[1]&&e[2]!==e[1].nref)&&(e[2]=e[1].nref,n[i[r]]=t===e[1]?!0:e[1].getSelectedData(1));return n},unserializeInputs:function(t,r){var n=this;if(!t||!n.hasInputs)return n;var a,i,s=n.inputs,l=o(t),u=l.length,h=e.ImArray,f=e.Util.Array.typed;for(i=0;u>i;i++)a=t[l[i]],a&&(!0===a?a=r:a[0]=f(a[0],h),s[l[i]]=[a,null,0]);return n},serializeFilter:function(){var t=this;return{filter:t.name,_isOn:t._isOn,_update:t._update,mode:t.mode,selection:t.selection,params:t.serialize()}},unserializeFilter:function(t){var e=this;return t&&e.name===t.filter&&(e._isOn=t._isOn,e._update=t._update,e.mode=t.mode||0,e.selection=t.selection||null,e._isOn&&t.params&&e.unserialize(t.params)),e},select:function(t,e,r,n,a){var i=this;return!1===t?i.selection=null:i.selection=a?[R(0,t||0),R(0,e||0),R(0,r||0),R(0,n||0),0]:[A(1,R(0,t||0)),A(1,R(0,e||0)),A(1,R(0,r||0)),A(1,R(0,n||0)),1],i},deselect:function(){return this.select(!1)},complete:function(t){return this.onComplete=t||null,this},setMode:function(t){return this.mode=t,this},getMode:function(){return this.mode},isOn:function(){return this._isOn},update:function(t){return arguments.length||(t=!0),this._update=!!t,this},turnOn:function(t){return arguments.length||(t=!0),this._isOn=!!t,this},toggle:function(){return this._isOn=!this._isOn,this},reset:function(){return this.resetInputs(),this},canRun:function(){return this._isOn},combineWith:function(t){return this},_apply:function(t,e,r,n){return t},apply:function(t,r,n){var a,i,o=this;return o.canRun()?(arguments.length<3&&(r&&r.setSelectedData?n=null:"function"==typeof r?(n=r,r=t):(r=t,n=null)),t&&r&&(n=n||o.onComplete,a=t.getSelectedData(),o.$thread?(o._listener.cb=function(t){o._listener.cb=null,t&&(t.meta&&o.setMetaData(t.meta,!0),t.im&&o._update&&(o.hasMeta&&null!=o.meta._IMG_WIDTH&&r.dimensions(o.meta._IMG_WIDTH,o.meta._IMG_HEIGHT),r.setSelectedData(e.Util.Array.typed(t.im,e.ImArray)))),n&&n.call(o)},o.send("apply",{im:a,params:o.serializeFilter(),inputs:o.serializeInputs(t)})):(i=o._apply(a[0],a[1],a[2],{src:t,dst:r}),o._update&&(o.hasMeta&&null!=o.meta._IMG_WIDTH&&r.dimensions(o.meta._IMG_WIDTH,o.meta._IMG_HEIGHT),r.setSelectedData(i)),n&&n.call(o))),t):t},toString:function(){return"[FILTER: "+this.name+"]"}});e.Filter[a].getMetaData=e.Filter[a].metaData,e.Filter[a].getInput=e.Filter[a].input,e.Filter[a].delInput=e.Filter[a].unsetInput,e.Filter.get=function(t){if(!t||!t.length)return null;if(-1<t.indexOf(".")){t=t.split(".");var r,n,a=t.length,i=e;for(r=0;a>r;r++){if(n=t[r],!i[n])return null;i=i[n]}return i}return e[t]||null},e.IO.Manager=e.Class({name:"IO.Manager",__static__:{read:e.Classy.Method(function(t,e,r){return function(t,e,n){return(new r).read(t,e,n)}},e.Classy.LATE|e.Classy.STATIC),write:e.Classy.Method(function(t,e,r){return function(t,e,n,a){return(new r).write(t,e,n,a)}},e.Classy.LATE|e.Classy.STATIC),load:e.Classy.Method(function(t,e,r){return function(t,e,n){return(new r).read(t,e,n)}},e.Classy.LATE|e.Classy.STATIC),save:e.Classy.Method(function(t,e,r){return function(t,e,n,a){return(new r).write(t,e,n,a)}},e.Classy.LATE|e.Classy.STATIC)},constructor:function(){},_crossOrigin:null,_responseType:null,_encoding:null,dispose:function(){var t=this;return t._crossOrigin=null,t._responseType=null,t._encoding=null,t},read:function(t,e,r){return null},write:function(t,e,r,n){return null},load:function(t,e,r){return this.read(t,e,r)},save:function(t,e,r,n){return this.write(t,e,r,n)},responseType:function(t){var e=this;return arguments.length?(e._responseType=t,e):e._responseType},crossOrigin:function(t){var e=this;return arguments.length?(e._crossOrigin=t,e):e._crossOrigin},encoding:function(t){var e=this;return arguments.length?(e._encoding=t,e):e._encoding}}),e.IO.Loader=e.IO.Reader=e.IO.Writer=e.IO.Manager,e.Codec.RAW={encoder:function(t,e){return new Buffer(t)},decoder:function(t,e){return{width:e.width||1,height:e.height||1,data:new Uint8Array(t)}}},e.Create=function(t){t=u({init:y,name:"PluginFilter"},t);var r=t.name;return t.constructor=w(t.init),null==t._apply&&"function"==typeof t.apply&&(t._apply=t.apply),"function"==typeof t.metaData&&t.metaData!==D[a].metaData?t.getMetaData=t.metaData:"function"==typeof t.getMetaData&&t.getMetaData!==D[a].getMetaData&&(t.metaData=t.getMetaData),delete t.init,t[i]("apply")&&delete t.apply,e[r]=e.Class(D,t)}}(this,a),!function(t,e){function r(t){return t.replace(Z,"\\$1")}function n(t){return t.toString().match(et)[1]||""}function a(t,e,r){return t>r?r:e>t?e:t}function i(t,e,r,n,a){r=r||0,n=n||0;var i,o,s=a?a-n+1:e.length,l=31&s;for(o=0;l>o;o++)t[o+r]=e[n+o];for(i=l;s>i;i+=32)o=i,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o,t[o+r]=e[n+o],++o}function o(t,e,r,n,a,i,o){i=J(i,e-1),o=J(o,r-1);var s,l,u,h,f=i-n+1,c=o-a+1,d=f*c<<2,g=new k(d),p=f<<2;for(s=a,l=a*e,u=0;o>=s;s++,l+=e,u+=p)h=l+n<<2,g.set(t.subarray(h,h+p),u);return g}function s(t,e,r,n,a,o,s){o=J(o,e-1),s=J(s,r-1);var l,u,h,f,c=o-n+1,d=s-a+1,g=c*d<<2,p=new k(g),m=c<<2;for(l=a,u=a*e,h=0;s>=l;l++,u+=e,h+=m)f=u+n<<2,i(p,t,h,f,f+m);return p}function l(t,e,r,n,a,i,o){n=n||0,a=a||0,i=i||0,o=o||0;var s,l,u,h,f=e+i+n,c=r+o+a,d=f*c<<2,g=new k(d),p=e<<2,m=f<<2,v=o*m,_=i<<2;for(s=0,l=0,u=v;r>s;s++,l+=e,u+=m)h=l<<2,g.set(t.subarray(h,h+p),_+u);return g}function u(t,e,r,n,a,o,s){n=n||0,a=a||0,o=o||0,s=s||0;var l,u,h,f,c=e+o+n,d=r+s+a,g=c*d<<2,p=new k(g),m=e<<2,v=c<<2,_=s*v,y=o<<2;for(l=0,u=0,h=_;r>l;l++,u+=e,h+=v)f=u<<2,i(p,t,y+h,f,f+m);return p}function h(t,e,r,n,a,i,o,s){if(n=J(n,e-1),a=J(a,r-1),i=J(i,e-1),o=J(o,r-1),0===n&&0===a&&e===i+1&&r===o+1)return!0===s?t:new U(t);if(!t.length||n>i||a>o)return new k(0);var l,u,h,f,c=i-n+1,d=o-a+1,g=c*d<<2,p=new k(g);for(l=n,u=a,h=0;o>=u;h+=4,l++)l>i&&(l=n,u++),f=u*e+l<<2,p[h]=t[f],p[h+1]=t[f+1],p[h+2]=t[f+2],p[h+3]=t[f+3];return p}function f(t,e,r,n,a,i,o,s,l,u,h,f){var c,d,g,p;if(!(t.length&&n.length&&a&&i&&e&&r))return t;for(o=J(o,a-1),s=J(s,i-1),h=J(h,e-1),f=J(f,r-1),l=J(l,a-1),u=J(u,i-1),h-=o,f-=s,g=o,p=s;u>=p;g++)g>l&&(g=o,p++),p+f>=r||g+h>=e||(c=p*a+g<<2,d=(p+f)*e+g+h<<2,t[d]=n[c],t[d+1]=n[c+1],t[d+2]=n[c+2],t[d+3]=n[c+3]);return t}function c(t,e,r,n,a,i,o,s){if(a=J(a,e-1),i=J(i,r-1),o=J(o,e-1),s=J(s,r-1),!t.length||a>o||i>s)return t;var l,u,h,f=255&n[0],c=255&n[1],d=255&n[2],g=3<n.length?255&n[3]:255;for(l=a,u=i;s>=u;l++)l>o&&(l=a,u++),h=u*e+l<<2,t[h]=f,t[h+1]=c,t[h+2]=d,t[h+3]=g;return t}function d(t,e,r,n,a,i){n=n||0,a=a||0;var i,o,s,l,u,h,f=t.length,c=f>>>n,d=e<<n,g=(31&e)<<n,p=32<<n,m=1<<n;for(i=i||new P(c),o=0,l=0,s=a;g>s;s+=m)o+=t[s],i[l++]=o;for(u=g+a;u<rowlen;u+=p)s=u,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o,s+=m,o+=t[s],i[l++]=o;for(h=0,l=0,o=0,g+=rowlen,s=d+a;g>s;s+=m)o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0);for(u=g+a;f>u;u+=p)s=u,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0),s+=m,o+=t[s],i[l+e]=i[l]+o,++l,++h>=e&&(h=0,o=0);return i}function g(t,e,r,n,a,i,o){n=n||0,a=a||0;var s,l,u,h=32<<n,f=1<<n,c=t.length,d=c>>>n,g=(31&d)<<n;for(o=o||new P(256),s=a;g>s;s+=f)o[t[s]]++;for(l=g+a;c>l;l+=h)s=l,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++,s+=f,o[t[s]]++;if(!0===i)return o;for(u=0,s=0;256>s;s+=64)u+=o[s],o[s]=u,u+=o[s+1],o[s+1]=u,u+=o[s+2],o[s+2]=u,u+=o[s+3],o[s+3]=u,u+=o[s+4],o[s+4]=u,u+=o[s+5],o[s+5]=u,u+=o[s+6],o[s+6]=u,u+=o[s+7],o[s+7]=u,u+=o[s+8],o[s+8]=u,u+=o[s+9],o[s+9]=u,u+=o[s+10],o[s+10]=u,u+=o[s+11],o[s+11]=u,u+=o[s+12],o[s+12]=u,u+=o[s+13],o[s+13]=u,u+=o[s+14],o[s+14]=u,u+=o[s+15],o[s+15]=u,u+=o[s+16],o[s+16]=u,u+=o[s+17],o[s+17]=u,u+=o[s+18],o[s+18]=u,u+=o[s+19],o[s+19]=u,u+=o[s+20],o[s+20]=u,u+=o[s+21],o[s+21]=u,u+=o[s+22],o[s+22]=u,u+=o[s+23],o[s+23]=u,u+=o[s+24],o[s+24]=u,u+=o[s+25],o[s+25]=u,u+=o[s+26],o[s+26]=u,u+=o[s+27],o[s+27]=u,u+=o[s+28],o[s+28]=u,u+=o[s+29],o[s+29]=u,u+=o[s+30],o[s+30]=u,u+=o[s+31],o[s+31]=u,u+=o[s+32],o[s+32]=u,u+=o[s+33],o[s+33]=u,u+=o[s+34],o[s+34]=u,u+=o[s+35],o[s+35]=u,u+=o[s+36],o[s+36]=u,u+=o[s+37],o[s+37]=u,u+=o[s+38],o[s+38]=u,u+=o[s+39],o[s+39]=u,u+=o[s+40],o[s+40]=u,u+=o[s+41],o[s+41]=u,u+=o[s+42],o[s+42]=u,u+=o[s+43],o[s+43]=u,u+=o[s+44],o[s+44]=u,u+=o[s+45],o[s+45]=u,u+=o[s+46],o[s+46]=u,u+=o[s+47],o[s+47]=u,u+=o[s+48],o[s+48]=u,u+=o[s+49],o[s+49]=u,u+=o[s+50],o[s+50]=u,u+=o[s+51],o[s+51]=u,u+=o[s+52],o[s+52]=u,u+=o[s+53],o[s+53]=u,u+=o[s+54],o[s+54]=u,u+=o[s+55],o[s+55]=u,u+=o[s+56],o[s+56]=u,u+=o[s+57],o[s+57]=u,u+=o[s+58],o[s+58]=u,u+=o[s+59],o[s+59]=u,u+=o[s+60],o[s+60]=u,u+=o[s+61],o[s+61]=u,u+=o[s+62],o[s+62]=u,u+=o[s+63],o[s+63]=u;return o}function p(t,e,r,n,a){return null}function m(t,e,r,n,a,i,o,s){var l,u,h,f,c,d,g,p,m=t.length,v=e<<n,_=(31&e)<<n,y=32<<n,w=1<<n;for(l=u=0,d=0,f=a;_>f;f+=w)h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d;for(c=_+a;v>c;c+=y)f=c,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d,f+=w,h=t[f],l+=h,i[d]=l,s[d]=h,u+=h*h,o[d]=u,++d;for(g=0,p=1,d=0,l=0,u=0,_+=v,f=v+a;_>f;f+=w)h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0);for(c=_+a;m>c;c+=y)f=c,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0),f+=w,h=t[f],l+=h,i[d+e]=i[d]+l,u+=h*h,o[d+e]=o[d]+u,s[d+e]=s[d+1-e]+(h+t[d-e<<n])+(p>1?s[d-e-e]:0)+(g>0?s[d-1-e]:0),++d,++g>=e&&(g=0,p++,l=u=0)}function v(t,e,r,n,a,i,o,s,l,u,h,f){var c,d,g,p,m,v,y,w,C,I,A,R,b,M=n,D=t.length,x=D>>>n,S=e-1,E=r-1,O=e<<n,L=1<<n,T=L<<1,G=O,x=D>>>n,k=new P(x),U=new P(x);if(i){for(m=e-2,v=r-2,y=e<<1,b=new B(x),d=2,g=2,p=y;v>g&&!(d>=m&&(d=2,p+=e,g++,g>=v));d++)c=d+p,w=(c<<n)+a,C=w+G,I=C+G,A=w-G,R=A-G,b[c]=(103*(2*t[R-T]+4*t[R-L]+5*t[R]+4*t[R+L]+2*t[R+T]+4*t[A-T]+9*t[A-L]+12*t[A]+9*t[A+L]+4*t[A+T]+5*t[w-T]+12*t[w-L]+15*t[w]+12*t[w+L]+5*t[w+T]+4*t[C-T]+9*t[C-L]+12*t[C]+9*t[C+L]+4*t[C+T]+2*t[I-T]+4*t[I-L]+5*t[I]+4*t[I+L]+2*t[I+T])+8192&4294967295)>>>14&255;L=1,T=2,G=e,n=0,a=0}else b=t;for(d=1,g=1,p=e;E>g&&!(d>=S&&(d=1,p+=e,g++,g>=E));d++)c=p+d,w=(c<<n)+a,C=w+G,A=w-G,k[c]=b[A+L]-b[A-L]+(b[w+L]<<1)-(b[w-L]<<1)+b[C+L]-b[C-L],U[c]=b[A-L]-b[C-L]+(b[A]<<1)-(b[C]<<1)+b[A+L]-b[C+L];return _(k,U,t,e,r,M,o,s,l,u,h,f)}function _(t,e,r,n,a,i,o,s,l,u,h,f){null==u&&(u=1,h=510,f=u*h);var c,d,g,p,m,v,_,y,w,C,I,A,R,b,M,D,x,S,E,O,L,T,G,k,U,F,B,H,N,Y,K,W,j,X,z,$,V,J,Z,tt,et,rt,nt=r.length,at=nt>>>i,it=n-1,ot=a-1,st=new P(at);for(d=1,g=1,p=n;ot>g&&!(d>=it&&(d=1,p+=n,g++,g>=ot));d++)v=d+p,y=v-n,_=v+n,w=v-1,C=v+1,A=y-1,I=y+1,b=_-1,R=_+1,M=t[v],D=e[v],x=Q(M),S=Q(D),E=x+S,L=Q(t[y])+Q(e[y]),T=Q(t[_])+Q(e[_]),G=Q(t[w])+Q(e[w]),k=Q(t[C])+Q(e[C]),U=Q(t[I])+Q(e[I]),F=Q(t[R])+Q(e[R]),B=Q(t[b])+Q(e[b]),H=Q(t[A])+Q(e[A]),N=0>=M*D?x>=S?(O=x*E)>=Q(D*U-(M+D)*k)&&O>Q(D*B-(M+D)*G):(O=S*E)>=Q(M*U-(D+M)*L)&&O>Q(M*B-(D+M)*T):x>=S?(O=x*E)>=Q(D*F+(M-D)*k)&&O>Q(D*H+(M-D)*G):(O=S*E)>=Q(M*F+(D-M)*T)&&O>Q(M*H+(D-M)*L),st[v]=N?E>=h?f:q(u*E):0;if(o){for(d=0,m=0;n>d;d++)m+=st[d],st[d]=m;for(d=n,p=0,m=0;at>d;d++,p++)p>=n&&(p=0,m=0),m+=st[d],st[d]=st[d-n]+m;return st}if(i)for(d=0;nt>d;d+=4)r[d]=r[d+1]=r[d+2]=0;else for(d=0;nt>d;d++)r[d]=0;for(d=0,g=0,c=0,p=0;at>c;c++,p=c<<i,d++)if(d>=n&&(d=0,g++),!(0!==r[p]||st[c]<l)){Y=d,j=g,et=p;do for(i?r[et]=r[et+1]=r[et+2]=255:r[et]=255,K=0===Y?Y:Y-1,W=Y===it?Y:Y+1,X=0===j?j:j-1,z=j===ot?j:j+1,J=X*n,$=K,V=X,Z=J,rt=0;W>=$&&z>=V;){if(tt=$+Z,et=tt<<i,(V!==X||$!==K)&&0===r[et]&&st[tt]>=s){Y=$,j=V,rt=1;break}V++,Z+=n,V>z&&(V=j,Z=J,$++)}while(rt)}return r}function y(t,e,r,n,a,i,o,s,l,u,h,f){var c,d,g,p,m,v,_,y,w,C,I,A,R,b,M,D,x,S,E,O,L,G,U,F,B,H,N,Y,K,W,j,X,z,$,q,V,J,Q,Z,tt,et,rt,nt,at,it,ot,st,lt,ut=e.length,ht=ut>>>a,ft=s,ct=l,dt=r<<a,gt=1<<a;if(y=ft*ct,v=ft>>>1,_=r*(ct>>>1),I=-v-1,R=-_-r,A=v,b=_,W=0,X=r-1,j=0,z=ht-r,w=e,e=new k(ut),f=f||1,T.GRAY===t)if(d=ht,C=r,c=new P(d),o)for(O=i[0],L=i[y>>>1],G=L-O,U=o[0],F=o[y>>>1],B=F-U,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=0,x=0;r>x;x++,M+=gt,D++)g+=e[M],c[D]=g;for(D=0,x=0,g=0,M=dt;ut>M;M+=gt,D++,x++)x>=r&&(x=0,g=0),g+=e[M],c[D+C]=c[D]+g;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],at=U*(c[J]-c[q]-c[V]+c[$])+B*e[M],Q=u*et+h*at,w[M]=0|Q,w[M+1]=0|Q,w[M+2]=0|Q,w[M+3]=e[M+3]}else for(O=i[0],L=i[y>>>1],G=L-O,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=0,x=0;r>x;x++,M+=gt,D++)g+=e[M],c[D]=g;for(D=0,x=0,g=0,M=dt;ut>M;M+=gt,D++,x++)x>=r&&(x=0,g=0),g+=e[M],c[D+C]=c[D]+g;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],Q=u*et+h,w[M]=0|Q,w[M+1]=0|Q,w[M+2]=0|Q,w[M+3]=e[M+3]}else if(d=(ht<<1)+ht,C=(r<<1)+r,c=new P(d),o)for(O=i[0],L=i[y>>>1],G=L-O,U=o[0],F=o[y>>>1],B=F-U,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=p=m=0,x=0;r>x;x++,M+=gt,D+=3)g+=e[M],p+=e[M+1],m+=e[M+2],c[D]=g,c[D+1]=p,c[D+2]=m;for(D=0,x=0,g=p=m=0,M=dt;ut>M;M+=gt,D+=3,x++)x>=r&&(x=0,g=p=m=0),g+=e[M],p+=e[M+1],m+=e[M+2],c[D+C]=c[D]+g,c[D+C+1]=c[D+1]+p,c[D+C+2]=c[D+2]+m;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,$=($<<1)+$,q=(q<<1)+q,V=(V<<1)+V,J=(J<<1)+J,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],rt=O*(c[J+1]-c[q+1]-c[V+1]+c[$+1])+G*e[M+1],nt=O*(c[J+2]-c[q+2]-c[V+2]+c[$+2])+G*e[M+2],at=U*(c[J]-c[q]-c[V]+c[$])+B*e[M],it=U*(c[J+1]-c[q+1]-c[V+1]+c[$+1])+B*e[M+1],ot=U*(c[J+2]-c[q+2]-c[V+2]+c[$+2])+B*e[M+2],Q=u*et+h*at,Z=u*rt+h*it,tt=u*nt+h*ot,w[M]=0|Q,w[M+1]=0|Z,w[M+2]=0|tt,w[M+3]=e[M+3]}else for(O=i[0],L=i[y>>>1],G=L-O,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=p=m=0,x=0;r>x;x++,M+=gt,D+=3)g+=e[M],p+=e[M+1],m+=e[M+2],c[D]=g,c[D+1]=p,c[D+2]=m;for(D=0,x=0,g=p=m=0,M=dt;ut>M;M+=gt,D+=3,x++)x>=r&&(x=0,g=p=m=0),g+=e[M],p+=e[M+1],m+=e[M+2],c[D+C]=c[D]+g,c[D+C+1]=c[D+1]+p,c[D+C+2]=c[D+2]+m;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,$=($<<1)+$,q=(q<<1)+q,V=(V<<1)+V,J=(J<<1)+J,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],rt=O*(c[J+1]-c[q+1]-c[V+1]+c[$+1])+G*e[M+1],nt=O*(c[J+2]-c[q+2]-c[V+2]+c[$+2])+G*e[M+2],Q=u*et+h,Z=u*rt+h,tt=u*nt+h,w[M]=0|Q,w[M+1]=0|Z,w[M+2]=0|tt,w[M+3]=e[M+3]}return w}function w(t,e,r,n,a,i,o,s,l,u,h,f){var c,d,g,p,m,v,_,y,w,C,I,A,R,b,M,D,x,S,E,O,L,G,U,F,B,H,N,Y,K,W,j,X,z,$,q,V,J,Q,Z,tt,et,rt,nt,at,it,ot,st,lt,ut=e.length,ht=ut>>>a,ft=s,ct=l,dt=r<<a,gt=1<<a;if(y=ft*ct,v=ft>>>1,_=r*(ct>>>1),I=-v-1,R=-_-r,A=v,b=_,W=0,X=r-1,j=0,z=ht-r,w=e,e=new k(ut),f=f||1,T.GRAY===t)if(d=ht,C=r,c=new P(d),o)for(O=i[0],L=i[y>>>1],G=L-O,U=o[0],F=o[y>>>1],B=F-U,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=0,x=0;r>x;x++,M+=gt,D++)g+=e[M],c[D]=g;for(D=0,x=0,g=0,M=dt;ut>M;M+=gt,D++,x++)x>=r&&(x=0,g=0),g+=e[M],c[D+C]=c[D]+g;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],
at=U*(c[J]-c[q]-c[V]+c[$])+B*e[M],Q=u*et+h*at,Q=0>Q?0:Q>255?255:Q,w[M]=0|Q,w[M+1]=0|Q,w[M+2]=0|Q,w[M+3]=e[M+3]}else for(O=i[0],L=i[y>>>1],G=L-O,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=0,x=0;r>x;x++,M+=gt,D++)g+=e[M],c[D]=g;for(D=0,x=0,g=0,M=dt;ut>M;M+=gt,D++,x++)x>=r&&(x=0,g=0),g+=e[M],c[D+C]=c[D]+g;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],Q=u*et+h,Q=0>Q?0:Q>255?255:Q,w[M]=0|Q,w[M+1]=0|Q,w[M+2]=0|Q,w[M+3]=e[M+3]}else if(d=(ht<<1)+ht,C=(r<<1)+r,c=new P(d),o)for(O=i[0],L=i[y>>>1],G=L-O,U=o[0],F=o[y>>>1],B=F-U,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=p=m=0,x=0;r>x;x++,M+=gt,D+=3)g+=e[M],p+=e[M+1],m+=e[M+2],c[D]=g,c[D+1]=p,c[D+2]=m;for(D=0,x=0,g=p=m=0,M=dt;ut>M;M+=gt,D+=3,x++)x>=r&&(x=0,g=p=m=0),g+=e[M],p+=e[M+1],m+=e[M+2],c[D+C]=c[D]+g,c[D+C+1]=c[D+1]+p,c[D+C+2]=c[D+2]+m;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,$=($<<1)+$,q=(q<<1)+q,V=(V<<1)+V,J=(J<<1)+J,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],rt=O*(c[J+1]-c[q+1]-c[V+1]+c[$+1])+G*e[M+1],nt=O*(c[J+2]-c[q+2]-c[V+2]+c[$+2])+G*e[M+2],at=U*(c[J]-c[q]-c[V]+c[$])+B*e[M],it=U*(c[J+1]-c[q+1]-c[V+1]+c[$+1])+B*e[M+1],ot=U*(c[J+2]-c[q+2]-c[V+2]+c[$+2])+B*e[M+2],Q=u*et+h*at,Z=u*rt+h*it,tt=u*nt+h*ot,Q=0>Q?0:Q>255?255:Q,Z=0>Z?0:Z>255?255:Z,tt=0>tt?0:tt>255?255:tt,w[M]=0|Q,w[M+1]=0|Z,w[M+2]=0|tt,w[M+3]=e[M+3]}else for(O=i[0],L=i[y>>>1],G=L-O,st=0;f>st;st++){for(lt=e,e=w,w=lt,M=0,D=0,g=p=m=0,x=0;r>x;x++,M+=gt,D+=3)g+=e[M],p+=e[M+1],m+=e[M+2],c[D]=g,c[D+1]=p,c[D+2]=m;for(D=0,x=0,g=p=m=0,M=dt;ut>M;M+=gt,D+=3,x++)x>=r&&(x=0,g=p=m=0),g+=e[M],p+=e[M+1],m+=e[M+2],c[D+C]=c[D]+g,c[D+C+1]=c[D+1]+p,c[D+C+2]=c[D+2]+m;for(x=0,S=0,E=0,M=0;ut>M;M+=gt,x++)x>=r&&(x=0,S++,E+=r),H=x+I,N=E+R,Y=x+A,K=E+b,H=W>H?W:H,Y=Y>X?X:Y,N=j>N?j:N,K=K>z?z:K,$=H+N,J=Y+K,q=Y+N,V=H+K,$=($<<1)+$,q=(q<<1)+q,V=(V<<1)+V,J=(J<<1)+J,et=O*(c[J]-c[q]-c[V]+c[$])+G*e[M],rt=O*(c[J+1]-c[q+1]-c[V+1]+c[$+1])+G*e[M+1],nt=O*(c[J+2]-c[q+2]-c[V+2]+c[$+2])+G*e[M+2],Q=u*et+h,Z=u*rt+h,tt=u*nt+h,Q=0>Q?0:Q>255?255:Q,Z=0>Z?0:Z>255?255:Z,tt=0>tt?0:tt>255?255:tt,w[M]=0|Q,w[M+1]=0|Z,w[M+2]=0|tt,w[M+3]=e[M+3]}return w}function C(t,e,r,n,a,i,o,s,l,u,h){var f,c,d,g,p,m,v,_,y,w,C,I,A,R,b,M,D,x,S,E,O,L,G,U,P,B,H,N,Y=e.length,K=Y>>>a,W=1<<a;for(M=r-1,D=K-r,v=new F(s),C=0,g=s.length;g>C;C+=2)v[C+1]*=r;for(_=new F(l),C=0,g=l.length;g>C;C+=2)_[C+1]*=r;if(H=2,c=i,d=s,B=u,m=v,p=e,e=new k(Y),T.GRAY===t)for(;H--;){for(N=e,e=p,p=N,f=c.length,g=d.length,I=0,A=0,y=0;Y>y;y+=W,I++){for(I>=r&&(I=0,A+=r),L=G=U=P=0,C=0,w=0;f>C;C++,w+=2)R=I+m[w],b=A+m[w+1],R>=0&&M>=R&&b>=0&&D>=b&&(srcOff=R+b<<2,O=c[C],L+=e[srcOff]*O);x=B*L,p[y]=0|x,p[y+1]=0|x,p[y+2]=0|x,p[y+3]=e[y+3]}c=o,d=l,B=h,m=_}else for(;H--;){for(N=e,e=p,p=N,f=c.length,g=d.length,I=0,A=0,y=0;Y>y;y+=W,I++){for(I>=r&&(I=0,A+=r),L=G=U=P=0,C=0,w=0;f>C;C++,w+=2)R=I+m[w],b=A+m[w+1],R>=0&&M>=R&&b>=0&&D>=b&&(srcOff=R+b<<2,O=c[C],L+=e[srcOff]*O,G+=e[srcOff+1]*O,U+=e[srcOff+2]*O);x=B*L,S=B*G,E=B*U,p[y]=0|x,p[y+1]=0|S,p[y+2]=0|E,p[y+3]=e[y+3]}c=o,d=l,B=h,m=_}return p}function I(t,e,r,n,a,i,o,s,l,u,h){var f,c,d,g,p,m,v,_,y,w,C,I,A,R,b,M,D,x,S,E,O,L,G,U,P,B,H,N,Y=e.length,K=Y>>>a,W=1<<a;for(M=r-1,D=K-r,v=new F(s),C=0,g=s.length;g>C;C+=2)v[C+1]*=r;for(_=new F(l),C=0,g=l.length;g>C;C+=2)_[C+1]*=r;if(H=2,c=i,d=s,B=u,m=v,p=e,e=new k(Y),T.GRAY===t)for(;H--;){for(N=e,e=p,p=N,f=c.length,g=d.length,I=0,A=0,y=0;Y>y;y+=W,I++){for(I>=r&&(I=0,A+=r),L=G=U=P=0,C=0,w=0;f>C;C++,w+=2)R=I+m[w],b=A+m[w+1],R>=0&&M>=R&&b>=0&&D>=b&&(srcOff=R+b<<2,O=c[C],L+=e[srcOff]*O);x=B*L,x=0>x?0:x>255?255:x,p[y]=0|x,p[y+1]=0|x,p[y+2]=0|x,p[y+3]=e[y+3]}c=o,d=l,B=h,m=_}else for(;H--;){for(N=e,e=p,p=N,f=c.length,g=d.length,I=0,A=0,y=0;Y>y;y+=W,I++){for(I>=r&&(I=0,A+=r),L=G=U=P=0,C=0,w=0;f>C;C++,w+=2)R=I+m[w],b=A+m[w+1],R>=0&&M>=R&&b>=0&&D>=b&&(srcOff=R+b<<2,O=c[C],L+=e[srcOff]*O,G+=e[srcOff+1]*O,U+=e[srcOff+2]*O);x=B*L,S=B*G,E=B*U,x=0>x?0:x>255?255:x,S=0>S?0:S>255?255:S,E=0>E?0:E>255?255:E,p[y]=0|x,p[y+1]=0|S,p[y+2]=0|E,p[y+3]=e[y+3]}c=o,d=l,B=h,m=_}return p}function A(t,e){null==e&&(e=0),null==t&&(t=1);var r,n=new H(256);if("function"==typeof t)for(r=0;256>r;r+=32)n[r]=0|a(t(r),0,255),n[r+1]=0|a(t(r+1),0,255),n[r+2]=0|a(t(r+2),0,255),n[r+3]=0|a(t(r+3),0,255),n[r+4]=0|a(t(r+4),0,255),n[r+5]=0|a(t(r+5),0,255),n[r+6]=0|a(t(r+6),0,255),n[r+7]=0|a(t(r+7),0,255),n[r+8]=0|a(t(r+8),0,255),n[r+9]=0|a(t(r+9),0,255),n[r+10]=0|a(t(r+10),0,255),n[r+11]=0|a(t(r+11),0,255),n[r+12]=0|a(t(r+12),0,255),n[r+13]=0|a(t(r+13),0,255),n[r+14]=0|a(t(r+14),0,255),n[r+15]=0|a(t(r+15),0,255),n[r+16]=0|a(t(r+16),0,255),n[r+17]=0|a(t(r+17),0,255),n[r+18]=0|a(t(r+18),0,255),n[r+19]=0|a(t(r+19),0,255),n[r+20]=0|a(t(r+20),0,255),n[r+21]=0|a(t(r+21),0,255),n[r+22]=0|a(t(r+22),0,255),n[r+23]=0|a(t(r+23),0,255),n[r+24]=0|a(t(r+24),0,255),n[r+25]=0|a(t(r+25),0,255),n[r+26]=0|a(t(r+26),0,255),n[r+27]=0|a(t(r+27),0,255),n[r+28]=0|a(t(r+28),0,255),n[r+29]=0|a(t(r+29),0,255),n[r+30]=0|a(t(r+30),0,255),n[r+31]=0|a(t(r+31),0,255);else for(r=0;256>r;r+=32)n[r]=0|a(e+t*r,0,255),n[r+1]=0|a(e+t*(r+1),0,255),n[r+2]=0|a(e+t*(r+2),0,255),n[r+3]=0|a(e+t*(r+3),0,255),n[r+4]=0|a(e+t*(r+4),0,255),n[r+5]=0|a(e+t*(r+5),0,255),n[r+6]=0|a(e+t*(r+6),0,255),n[r+7]=0|a(e+t*(r+7),0,255),n[r+8]=0|a(e+t*(r+8),0,255),n[r+9]=0|a(e+t*(r+9),0,255),n[r+10]=0|a(e+t*(r+10),0,255),n[r+11]=0|a(e+t*(r+11),0,255),n[r+12]=0|a(e+t*(r+12),0,255),n[r+13]=0|a(e+t*(r+13),0,255),n[r+14]=0|a(e+t*(r+14),0,255),n[r+15]=0|a(e+t*(r+15),0,255),n[r+16]=0|a(e+t*(r+16),0,255),n[r+17]=0|a(e+t*(r+17),0,255),n[r+18]=0|a(e+t*(r+18),0,255),n[r+19]=0|a(e+t*(r+19),0,255),n[r+20]=0|a(e+t*(r+20),0,255),n[r+21]=0|a(e+t*(r+21),0,255),n[r+22]=0|a(e+t*(r+22),0,255),n[r+23]=0|a(e+t*(r+23),0,255),n[r+24]=0|a(e+t*(r+24),0,255),n[r+25]=0|a(e+t*(r+25),0,255),n[r+26]=0|a(e+t*(r+26),0,255),n[r+27]=0|a(e+t*(r+27),0,255),n[r+28]=0|a(e+t*(r+28),0,255),n[r+29]=0|a(e+t*(r+29),0,255),n[r+30]=0|a(e+t*(r+30),0,255),n[r+31]=0|a(e+t*(r+31),0,255);return n}function R(t,e){var r,n=new H(256);for(r=0;256>r;r+=64)n[r]=a(t[a(e[r],0,255)],0,255),n[r+1]=a(t[a(e[r+1],0,255)],0,255),n[r+2]=a(t[a(e[r+2],0,255)],0,255),n[r+3]=a(t[a(e[r+3],0,255)],0,255),n[r+4]=a(t[a(e[r+4],0,255)],0,255),n[r+5]=a(t[a(e[r+5],0,255)],0,255),n[r+6]=a(t[a(e[r+6],0,255)],0,255),n[r+7]=a(t[a(e[r+7],0,255)],0,255),n[r+8]=a(t[a(e[r+8],0,255)],0,255),n[r+9]=a(t[a(e[r+9],0,255)],0,255),n[r+10]=a(t[a(e[r+10],0,255)],0,255),n[r+11]=a(t[a(e[r+11],0,255)],0,255),n[r+12]=a(t[a(e[r+12],0,255)],0,255),n[r+13]=a(t[a(e[r+13],0,255)],0,255),n[r+14]=a(t[a(e[r+14],0,255)],0,255),n[r+15]=a(t[a(e[r+15],0,255)],0,255),n[r+16]=a(t[a(e[r+16],0,255)],0,255),n[r+17]=a(t[a(e[r+17],0,255)],0,255),n[r+18]=a(t[a(e[r+18],0,255)],0,255),n[r+19]=a(t[a(e[r+19],0,255)],0,255),n[r+20]=a(t[a(e[r+20],0,255)],0,255),n[r+21]=a(t[a(e[r+21],0,255)],0,255),n[r+22]=a(t[a(e[r+22],0,255)],0,255),n[r+23]=a(t[a(e[r+23],0,255)],0,255),n[r+24]=a(t[a(e[r+24],0,255)],0,255),n[r+25]=a(t[a(e[r+25],0,255)],0,255),n[r+26]=a(t[a(e[r+26],0,255)],0,255),n[r+27]=a(t[a(e[r+27],0,255)],0,255),n[r+28]=a(t[a(e[r+28],0,255)],0,255),n[r+29]=a(t[a(e[r+29],0,255)],0,255),n[r+30]=a(t[a(e[r+30],0,255)],0,255),n[r+31]=a(t[a(e[r+31],0,255)],0,255),n[r+32]=a(t[a(e[r+32],0,255)],0,255),n[r+33]=a(t[a(e[r+33],0,255)],0,255),n[r+34]=a(t[a(e[r+34],0,255)],0,255),n[r+35]=a(t[a(e[r+35],0,255)],0,255),n[r+36]=a(t[a(e[r+36],0,255)],0,255),n[r+37]=a(t[a(e[r+37],0,255)],0,255),n[r+38]=a(t[a(e[r+38],0,255)],0,255),n[r+39]=a(t[a(e[r+39],0,255)],0,255),n[r+40]=a(t[a(e[r+40],0,255)],0,255),n[r+41]=a(t[a(e[r+41],0,255)],0,255),n[r+42]=a(t[a(e[r+42],0,255)],0,255),n[r+43]=a(t[a(e[r+43],0,255)],0,255),n[r+44]=a(t[a(e[r+44],0,255)],0,255),n[r+45]=a(t[a(e[r+45],0,255)],0,255),n[r+46]=a(t[a(e[r+46],0,255)],0,255),n[r+47]=a(t[a(e[r+47],0,255)],0,255),n[r+48]=a(t[a(e[r+48],0,255)],0,255),n[r+49]=a(t[a(e[r+49],0,255)],0,255),n[r+50]=a(t[a(e[r+50],0,255)],0,255),n[r+51]=a(t[a(e[r+51],0,255)],0,255),n[r+52]=a(t[a(e[r+52],0,255)],0,255),n[r+53]=a(t[a(e[r+53],0,255)],0,255),n[r+54]=a(t[a(e[r+54],0,255)],0,255),n[r+55]=a(t[a(e[r+55],0,255)],0,255),n[r+56]=a(t[a(e[r+56],0,255)],0,255),n[r+57]=a(t[a(e[r+57],0,255)],0,255),n[r+58]=a(t[a(e[r+58],0,255)],0,255),n[r+59]=a(t[a(e[r+59],0,255)],0,255),n[r+60]=a(t[a(e[r+60],0,255)],0,255),n[r+61]=a(t[a(e[r+61],0,255)],0,255),n[r+62]=a(t[a(e[r+62],0,255)],0,255),n[r+63]=a(t[a(e[r+63],0,255)],0,255);return n}function b(){return new N([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0])}function M(t,e){var r=new N(20);return r[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],r[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],r[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],r[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],r[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],r[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],r[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],r[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],r[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],r[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],r[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],r[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],r[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],r[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],r[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],r[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],r[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],r[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],r[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],r[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],r}function D(t,e,r,n,a,i,o,s,l){var u=new N(20),h=5*i,f=5*o,c=5*s,d=5*l;return u[h+e]=t[0],u[h+r]=t[1],u[h+n]=t[2],u[h+a]=t[3],u[h+4]=t[4],u[f+e]=t[5],u[f+r]=t[6],u[f+n]=t[7],u[f+a]=t[8],u[f+4]=t[9],u[c+e]=t[10],u[c+r]=t[11],u[c+n]=t[12],u[c+a]=t[13],u[c+4]=t[14],u[d+e]=t[15],u[d+r]=t[16],u[d+n]=t[17],u[d+a]=t[18],u[d+4]=t[19],u}function x(t,e){var r=new Y(8);return r[0]=t[0]*e[0]+t[1]*e[4],r[1]=t[0]*e[1]+t[1]*e[5],r[2]=t[0]*e[2]+t[1]*e[6]+t[2],r[3]=t[0]*e[3]+t[1]*e[7]+t[3],r[4]=t[4]*e[0]+t[5]*e[4],r[5]=t[4]*e[1]+t[5]*e[5],r[6]=t[4]*e[2]+t[5]*e[6]+t[6],r[7]=t[4]*e[3]+t[5]*e[7]+t[7],r}function S(){return new Y([1,0,0,0,0,1,0,0])}function E(t,e,r,n,a){a=a||Array,r=r||1,n=n||1;for(var i=0,o=t.length,s=new a(o);o>i;i++)s[i]=r*t[i]+n*e[i];return s}function O(t,e,r){r=r||Array,e===+e&&(e=[e]);var n,a,i=t.length,o=e.length,s=new r(i*o);for(n=0,a=0;i>n;)s[n*o+a]=t[n]*e[a],++a>=o&&(a=0,n++);return s}function L(t,e,r,n,a,i){n=0|n,a=0|a,i=0|i;var o=new B(256),s=0;return o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o[s]=(Q(r-s)<=i?n:a)<<2|(Q(e-s)<=i?n:a)<<1|(Q(t-s)<=i?n:a)<<0,++s,o}if(!t.Util.LOADED_CORE){t.Util.LOADED_CORE=!0;var T=t.MODE,G=t._notSupportClamp,k=(t._noTypedArraySet,t.ImArray),U=t.ImArrayCopy,P=t.Array32F,F=(t.Array64F,t.Array32I,t.Array16I),B=t.Array8U,H=t.ColorTable,N=t.ColorMatrix,Y=t.AffineMatrix,K=(t.ConvolutionMatrix,t.Util.Array=t.Util.Array||{}),W=t.Util.String=t.Util.String||{},j=t.Util.Math=t.Util.Math||{},X=t.Util.Image=t.Util.Image||{},z=t.Util.Filter=t.Util.Filter||{},$=t.Util.Codec=t.Util.Codec||{},q=(Math.exp,Math.sqrt,Math.pow,Math.ceil,Math.floor),V=Math.log,J=(Math.sin,Math.cos,Math.min),Q=(Math.max,Math.abs),Z=(Math.PI,Math.log2||function(t){return V(t)/Math.LN2},/([.*+?^${}()|\[\]\/\\\-])/g),tt=/^\s+|\s+$/g,et=/^function[^{]+{([\s\S]*)}$/;j.random=Math.random,j.clamp=a,j.sign=function(t){return 0>t?-1:1},K.typed=t.Browser.isNode?function(t,e){return null==t||t instanceof e?t:Array.isArray(t)?Array===e?t:new e(t):(null==t.length&&(t.length=Object.keys(t).length),Array===e?Array.prototype.slice.call(t):new e(Array.prototype.slice.call(t)))}:function(t,e){return t},K.typed_obj=t.Browser.isNode?function(t,e){return null==t?t:e?JSON.parse(t):JSON.stringify(t)}:function(t){return t},K.arrayset_shim=i,K.arrayset=K.hasArrayset?function(t,e,r){t.set(e,r||0)}:i,K.subarray=K.hasSubarray?function(t,e,r){return t.subarray(e,r)}:function(t,e,r){return t.slice(e,r)},W.esc=r,W.trim=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(tt,"")},W.function_body=n,$.readBytes=function(t,e,r){var n,a=[];if(t>=0)for(n=0;t>n;++n)a.push(e[r.pos++]);else for(n=0;n>t;--n)a.push(e[r.pos++]);return a},$.readUInt8=function(t,e){return t[e.pos++]},$.readUInt16LE=function(t,e){var r,n;return r=t[e.pos++],n=t[e.pos++],r|n<<8},$.readUInt16BE=function(t,e){var r,n;return r=t[e.pos++],n=t[e.pos++],n|r<<8},$.readUInt32LE=function(t,e){var r,n,a,i;return r=t[e.pos++],n=t[e.pos++],a=t[e.pos++],i=t[e.pos++],r|n<<8|a<<16|i<<24},$.readUInt32BE=function(t,e){var r,n,a,i;return r=t[e.pos++],n=t[e.pos++],a=t[e.pos++],i=t[e.pos++],i|a<<8|n<<16|r<<24},$.write=function(t,e){for(var r=0,n=e.length;n>r;r++)t.push(e.charCodeAt(r))},$.writeUInt8=function(t,e){t.push(255&e)},$.writeUInt16LE=function(t,e){t.push(255&e,e>>>8&255)},$.writeUInt16BE=function(t,e){t.push(e>>>8&255,255&e)},$.writeUInt32LE=function(t,e){t.push(255&e,e>>>8&255,e>>>16&255,e>>>24&255)},$.writeUInt32BE=function(t,e){t.push(e>>>24&255,e>>>16&255,e>>>8&255,255&e)},$.fill=function(t,e,r,n){for(var a=r;n>a;a++)t[a]=e},X.get_data=h,X.set_data=f,X.fill=c,X.crop=t.Interpolation.crop=K.hasArrayset?o:s,X.pad=t.Interpolation.pad=K.hasArrayset?l:u,z.integral=d,z.histogram=g,z.spectrum=p,z.ct_eye=A,z.ct_multiply=R,z.cm_eye=b,z.cm_multiply=M,z.cm_rechannel=D,z.am_eye=S,z.am_multiply=x,z.cm_combine=E,z.cm_convolve=O,z.integral_convolution=G?w:y,z.separable_convolution=G?I:C,z.gradient=v,z.optimum_gradient=_,z.sat=m,z.dissimilarity_rgb=L}}(a),!function(t,e){var r=t.Util.Math.clamp,n=t.ImArray;t.Interpolation.bilinear=function(t,e,a,i,o){var s,l,u,h,f,c,d,g,p,m,v,_,y,w,C,I,A,R,b,M=i*o<<2,D=new n(M),x=(e-1)/i,S=(a-1)/o,E=e<<2;for(p=0,m=0,v=0,_=0,w=0,A=0,b=0,I=0;M>I;I+=4,m++,v+=x)m>=i&&(m=0,v=0,p++,_+=S,w=0|_,b=_-w,A=w*e),y=0|v,R=v-y,f=(1-R)*(1-b),c=R*(1-b),d=b*(1-R),g=R*b,C=A+y<<2,s=t[C],l=t[C+4],u=t[C+E],h=t[C+E+4],D[I]=0|r(s*f+l*c+u*d+h*g+.5,0,255),s=t[C+1],l=t[C+5],u=t[C+E+1],h=t[C+E+5],D[I+1]=0|r(s*f+l*c+u*d+h*g+.5,0,255),s=t[C+2],l=t[C+6],u=t[C+E+2],h=t[C+E+6],D[I+2]=0|r(s*f+l*c+u*d+h*g+.5,0,255),s=t[C+3],l=t[C+7],u=t[C+E+3],h=t[C+E+7],D[I+3]=0|r(s*f+l*c+u*d+h*g+.5,0,255);return D}}(a),!function(e,r){function n(t,e,r,n,a){t[e]=255&(r[0]+a*(n[0]-r[0])|0),t[e+1]=255&(r[1]+a*(n[1]-r[1])|0),t[e+2]=255&(r[2]+a*(n[2]-r[2])|0),t[e+3]=255&(r[3]+a*(n[3]-r[3])|0)}var a=Math.sqrt,i=Math.round,o=(Math.floor,Math.min),s=Math.max,l=Math.abs,u=Math.sin,h=Math.cos,f=Math.PI,c=2*f,d=f/2,g=3*d,p=e.Util.Math.clamp,m=e.Util.String.esc,v=e.Util.String.trim,_=e.LUMA,y=(e.CHANNEL,1/255),w=100/255,C=2.55,I={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],
darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},A=e.Color=e.Class({__static__:{clamp:p,clampPixel:function(t){return o(255,s(t,0))},color24:function(t,e,r){return(255&t)<<16|(255&e)<<8|255&r},color32:function(t,e,r,n){return(255&n)<<24|(255&t)<<16|(255&e)<<8|255&r},rgb24:function(t){return[t>>>16&255,t>>>8&255,255&t]},rgba32:function(t){return[t>>>16&255,t>>>8&255,255&t,t>>>24&255]},intensity:function(t,e,r){return~~(_[0]*t+_[1]*e+_[2]*r)},hue:function(t,e,r){var n=s(t,e,r);return t===e&&e===r?0:t===n?60*l(e-r)/(n-o(t,e,r)):e===n?120+60*l(r-t)/(n-o(t,e,r)):240+60*l(t-e)/(n-o(t,e,r))},saturation:function(t,e,r){var n=s(t,e,r);return t===e&&e===r?0:255*(n-o(t,e,r))/n},dist:function(t,e,r,n){var i=t[r+0]-e[n+0],o=t[r+1]-e[n+1],s=t[r+2]-e[n+2];return a(i*i+o*o+s*s)},RGB2Gray:function(t,e){var r=_[0]*t[e+0]+_[1]*t[e+1]+_[2]*t[e+2]|0;return t[e+0]=r,t[e+1]=r,t[e+2]=r,t},RGB2Color:function(t,e){return(255&t[e+0])<<16|(255&t[e+1])<<8|255&t[e+2]},RGBA2Color:function(t,e){return(255&t[e+3])<<24|(255&t[e+0])<<16|(255&t[e+1])<<8|255&t[e+2]},Color2RGBA:function(t,e,r){return t=0|t,e[r+0]=t>>>16&255,e[r+1]=t>>>8&255,e[r+2]=255&t,e[r+3]=t>>>24&255,e},RGB2YCbCr:function(t,e){var r=t[e+0],n=t[e+1],a=t[e+2];return t[e+0]=0+.299*r+.587*n+.114*a|0,t[e+1]=128-.168736*r-.331264*n+.5*a|0,t[e+2]=128+.5*r-.418688*n-.081312*a|0,t},YCbCr2RGB:function(t,e){var r=t[e+0],n=t[e+1],a=t[e+2];return t[e+0]=r+1.402*(a-128)|0,t[e+1]=r-.34414*(n-128)-.71414*(a-128)|0,t[e+2]=r+1.772*(n-128)|0,t},RGB2HSV:function(t,e,r){var n,a,i,u,h,f,c=t[e+0],d=t[e+1],g=t[e+2];return a=s(c,d,g),n=o(c,d,g),f=a,0===a?(h=0,u=0):(i=a-n,h=i/a,u=c===a?60*l(d-g)/i:d===a?120+60*l(g-c)/i:240+60*l(c-d)/i),t[e+0]=r?u:.7083333333333334*u,t[e+1]=r?h:255*h,t[e+2]=f,t},HSV2RGB:function(t,e,r){var n,a,i,o,s,l,u,h,f=r?t[e+0]:1.411764705882353*t[e+0],c=r?t[e+1]:.00392156862745098*t[e+1],d=t[e+2];return 0===c?l=u=h=d:(f/=60,n=~~f,a=f-n,i=d*(1-c),o=d*(1-c*a),s=d*(1-c*(1-a)),0===n?(l=d,u=s,h=i):1===n?(l=o,u=d,h=i):2===n?(l=i,u=d,h=s):3===n?(l=i,u=o,h=d):4===n?(l=s,u=i,h=d):(l=d,u=i,h=o)),t[e+0]=l,t[e+1]=u,t[e+2]=h,t},RGB2CMYK:function(t,e){var r,n=0,a=0,i=0,s=0,l=t[e+0],u=t[e+1],h=t[e+2];return 0===l&&0===u&&0===h?t:(n=255-l,a=255-u,i=255-h,s=o(n,a,i),r=255===s?0:255/(255-s),t[e+0]=(n-s)*r,t[e+1]=(a-s)*r,t[e+2]=(i-s)*r,t)},toString:function(){return"[FILTER: "+this.name+"]"},C2F:y,C2P:w,P2C:C,Keywords:I,hexieRE:/^#([0-9a-fA-F]{8})\b/,hexRE:/^#([0-9a-fA-F]{3,6})\b/,rgbRE:/^(rgba?)\b\s*\(([^\)]*)\)/i,hslRE:/^(hsla?)\b\s*\(([^\)]*)\)/i,keywordRE:new RegExp("^("+Object.keys(I).map(m).join("|")+")\\b","i"),colorstopRE:/^\s+(\d+(\.\d+)?%?)/,col2per:function(t,e){return t*w+(e||"")},per2col:function(t){return t*C},rgb2cmyk:function(t,e,r,n){var a,s,l=0,u=0,h=0,f=0;return n&&(t=p(i(t*C),0,255),e=p(i(e*C),0,255),r=p(i(r*C),0,255)),0===t&&0===e&&0===r?[0,0,0,1]:(l=1-t*y,u=1-e*y,h=1-r*y,a=o(l,u,h),s=1/(1-a),l=(l-a)*s,u=(u-a)*s,h=(h-a)*s,f=a,[l,u,h,f])},cmyk2rgb:function(t,e,r,n){var a,o,s=0,l=0,u=0;return 0===t&&0===e&&0===r?[0,0,0]:(a=n,o=1-a,t=t*o+a,e=e*o+a,r=r*o+a,s=255*(1-t),l=255*(1-e),u=255*(1-r),[p(i(s),0,255),p(i(l),0,255),p(i(u),0,255)])},rgb2hex:function(t,e,r,n,a){var o;return a&&(t=p(i(t*C),0,255),e=p(i(e*C),0,255),r=p(i(r*C),0,255)),t=16>t?"0"+t.toString(16):t.toString(16),e=16>e?"0"+e.toString(16):e.toString(16),r=16>r?"0"+r.toString(16):r.toString(16),o=n&&t[0]===t[1]&&e[0]===e[1]&&r[0]===r[1]?"#"+t[0]+e[0]+r[0]:"#"+t+e+r},rgb2hexIE:function(t,e,r,n,a){var o;return a&&(t=p(i(t*C),0,255),e=p(i(e*C),0,255),r=p(i(r*C),0,255),n=p(i(n*C),0,255)),t=16>t?"0"+t.toString(16):t.toString(16),e=16>e?"0"+e.toString(16):e.toString(16),r=16>r?"0"+r.toString(16):r.toString(16),n=16>n?"0"+n.toString(16):n.toString(16),o="#"+n+t+e+r},hex2rgb:function(t){return!t||3>t.length?[0,0,0]:6>t.length?[p(parseInt(t[0]+t[0],16),0,255),p(parseInt(t[1]+t[1],16),0,255),p(parseInt(t[2]+t[2],16),0,255)]:[p(parseInt(t[0]+t[1],16),0,255),p(parseInt(t[2]+t[3],16),0,255),p(parseInt(t[4]+t[5],16),0,255)]},hue2rgb:function(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(2/3-r)*6:t},hsl2rgb:function(t,e,r){var n,a,o,s,l,u=A.hue2rgb;return t=(t+360)%360/360,e*=.01,r*=.01,0===e?(n=1,a=1,o=1):(l=.5>r?r*(1+e):r+e-r*e,s=2*r-l,n=u(s,l,t+1/3),a=u(s,l,t),o=u(s,l,t-1/3)),[p(i(255*n),0,255),p(i(255*a),0,255),p(i(255*o),0,255)]},rgb2hsl:function(t,e,r,n){var a,l,u,h,f,c;return n?(t*=.01,e*=.01,r*=.01):(t*=y,e*=y,r*=y),l=s(t,e,r),a=o(t,e,r),f=.5*(l+a),l===a?u=h=0:(c=l-a,h=f>.5?c/(2-s-o):c/(s+o),u=l==t?(e-r)/c+(r>e?6:0):l==e?(r-t)/c+2:(t-e)/c+4,u/=6),[i(360*u)%360,p(100*h,0,100),p(100*f,0,100)]},parse:function(t,e,r,n){var a,i,o,s,l,u=0,h=0;if("hsl"===r||!r&&(a=t.match(A.hslRE))){if("hsl"===r){l="hsla"===t[0].toLowerCase();var f=t[1].split(",").map(v)}else{u=a[0].length,h=0,l="hsla"===a[1].toLowerCase();var f=a[2].split(",").map(v)}var c=f[0]?f[0]:"0",t=f[1]?f[1]:"0",d=f[2]?f[2]:"0",g=l&&null!=f[3]?f[3]:"1";return c=parseFloat(c,10),t="%"===t.slice(-1)?parseFloat(t,10):parseFloat(t,10)*w,d="%"===d.slice(-1)?parseFloat(d,10):parseFloat(d,10)*w,g=parseFloat(g,10),s=(new A).fromHSL([c,t,d,g]),e&&(o=t.substr(u),(i=o.match(A.colorstopRE))&&(s.colorStop(i[1]),h=i[0].length)),n?s:[s,0,u+h]}if("rgb"===r||!r&&(a=t.match(A.rgbRE))){if("rgb"===r){l="rgba"===t[0].toLowerCase();var f=t[1].split(",").map(v)}else{u=a[0].length,h=0,l="rgba"===a[1].toLowerCase();var f=a[2].split(",").map(v)}var p=f[0]?f[0]:"0",m=f[1]?f[1]:"0",_=f[2]?f[2]:"0",g=l&&null!=f[3]?f[3]:"1";return p="%"===p.slice(-1)?2.55*parseFloat(p,10):parseFloat(p,10),m="%"===m.slice(-1)?2.55*parseFloat(m,10):parseFloat(m,10),_="%"===_.slice(-1)?2.55*parseFloat(_,10):parseFloat(_,10),g=parseFloat(g,10),s=(new A).fromRGB([p,m,_,g]),e&&(o=t.substr(u),(i=o.match(A.colorstopRE))&&(s.colorStop(i[1]),h=i[0].length)),n?s:[s,0,u+h]}if("hex"===r||!r&&(a=t.match(A.hexRE))){if("hex"===r)var f=A.hex2rgb(t[0]);else{u=a[0].length,h=0;var f=A.hex2rgb(a[1])}var y=f[0]?f[0]:0,C=f[1]?f[1]:0,I=f[2]?f[2]:0,g=null!=f[3]?f[3]:255;return s=(new A).fromHEX([y,C,I,g]),e&&(o=t.substr(u),(i=o.match(A.colorstopRE))&&(s.colorStop(i[1]),h=i[0].length)),n?s:[s,0,u+h]}if("keyword"===r||!r&&(a=t.match(A.keywordRE))){if("keyword"===r)var f=t[0];else{u=a[0].length,h=0;var f=a[1]}return s=(new A).fromKeyword(f),e&&(o=t.substr(u),(i=o.match(A.colorstopRE))&&(s.colorStop(i[1]),h=i[0].length)),n?s:[s,0,u+h]}return null},fromString:function(t,e,r){return A.parse(t,e,r,1)},fromRGB:function(t){return(new A).fromRGB(t)},fromHSL:function(t){return(new A).fromHSL(t)},fromCMYK:function(t){return(new A).fromCMYK(t)},fromHEX:function(t){return(new A).fromHEX(t)},fromKeyword:function(t){return(new A).fromKeyword(t)},fromPixel:function(t){return(new A).fromPixel(t)}},constructor:function R(t,e){return this instanceof R?(this.reset(),void(t&&this.set(t,e))):new R(t,e)},name:"Color",col:null,cstop:null,kword:null,clone:function(){var t=new A;return t.col=this.col.slice(),t.cstop=this.cstop+"",t.kword=this.kword,t},reset:function(){return this.col=[0,0,0,1],this.cstop="",this.kword=null,this},set:function(t,e){return t&&(r!==t[0]&&(this.col[0]=p(t[0],0,255)),r!==t[1]&&(this.col[1]=p(t[1],0,255)),r!==t[2]&&(this.col[2]=p(t[2],0,255)),r!==t[3]?this.col[3]=p(t[3],0,1):this.col[3]=1,e&&(this.cstop=e),this.kword=null),this},colorStop:function(t){return this.cstop=t,this},isTransparent:function(){return 1>this.col[3]},isKeyword:function(){return!!this.kword},fromPixel:function(t){return t=t||0,this.col=[p(t>>16&255,0,255),p(t>>8&255,0,255),p(255&t,0,255),p((t>>24&255)*y,0,1)],this.kword=null,this},fromKeyword:function(t){return t=t.toLowerCase(),A.Keywords[t]&&(this.col=A.Keywords[t].slice(),this.kword=t),this},fromHEX:function(t){return this.col[0]=t[0]?p(parseInt(t[0],10),0,255):0,this.col[1]=t[1]?p(parseInt(t[1],10),0,255):0,this.col[2]=t[2]?p(parseInt(t[2],10),0,255):0,this.col[3]=r!==t[3]?p(parseInt(t[3],10)*y,0,1):1,this.kword=null,this},fromRGB:function(t){return this.col[0]=t[0]?p(i(t[0]),0,255):0,this.col[1]=t[1]?p(i(t[1]),0,255):0,this.col[2]=t[2]?p(i(t[2]),0,255):0,this.col[3]=r!==t[3]?p(t[3],0,1):1,this.kword=null,this},fromCMYK:function(t){var e=A.cmyk2rgb(t[0]||0,t[1]||0,t[2]||0,t[3]||0);return this.col[0]=e[0],this.col[1]=e[1],this.col[2]=e[2],this.col[3]=r!==t[4]?p(t[4],0,1):1,this.kword=null,this},fromHSL:function(t){var e=A.hsl2rgb(t[0]||0,t[1]||0,t[2]||0);return this.col[0]=e[0],this.col[1]=e[1],this.col[2]=e[2],this.col[3]=r!==t[3]?p(t[3],0,1):1,this.kword=null,this},toPixel:function(t){return t?p(255*this.col[3],0,255)<<24|this.col[0]<<16|this.col[1]<<8|255&this.col[2]:this.col[0]<<16|this.col[1]<<8|255&this.col[2]},toCMYK:function(t,e,r){var n=A.rgb2cmyk(this.col[0],this.col[1],this.col[2]);return r?n:n.concat(this.col[3])},toKeyword:function(t,e,r){return this.kword?this.kword:this.toHEX(1,e,r)},toHEX:function(t,e,r){return r?A.rgb2hexIE(this.col[0],this.col[1],this.col[2],p(i(255*this.col[3]),0,255)):A.rgb2hex(this.col[0],this.col[1],this.col[2],e)},toRGB:function(t,e,r){var n=this.col[3];return t?(e&&(n=1>n&&n>0?n.toString().slice(1):n),r||1==this.col[3]?"rgb("+this.col.slice(0,3).join(",")+")":"rgba("+this.col.slice(0,3).concat(n).join(",")+")"):r?this.col.slice(0,3):this.col.slice()},toHSL:function(t,e,r){var n=this.col[3],a=A.rgb2hsl(this.col[0],this.col[1],this.col[2]);return t?(e&&(a[1]=0==a[1]?a[1]:a[1]+"%",a[2]=0==a[2]?a[2]:a[2]+"%",n=1>n&&n>0?n.toString().slice(1):n),r||1==this.col[3]?"hsl("+[a[0],a[1],a[2]].join(",")+")":"hsla("+[a[0],a[1],a[2],n].join(",")+")"):r?a:a.concat(this.col[3])},toColorStop:function(t){var e=this.cstop;return t?(e=e.length?e+",":"",1>this.col[3]?"color-stop("+e+this.toRGB(1,1)+")":"color-stop("+e+this.toHEX(1,1)+")"):(e=e.length?" "+e:"",1>this.col[3]?this.toRGB(1,1)+e:this.toHEX(1,1)+e)},toString:function(t,e){return t=t?t.toLowerCase():"hex","rgb"==t||"rgba"==t?this.toRGB(1,!1!==e,"rgb"==t):"hsl"==t||"hsla"==t?this.toHSL(1,!1!==e,"hsl"==t):"keyword"==t?this.toKeyword(1):this.toHEX(1,!1!==e,"hexie"==t)}});A.toGray=A.intensity,A.Gradient={interpolate:n,stops:function(t,e){e=e?e.slice():e,t=t?t.slice():t;var r,n=t.length;if(e){if(e.length<n){var a=e.length,i=e[a-1];for(r=a;n>r;r++)e.push(r+1===n?1:i+(r-a+1)/(n-1))}}else if(1===n)e=[1];else for(e=new Array(n),r=0;n>r;r++)e[r]=r+1===n?1:r/(n-1);return 1!=e[e.length-1]&&(e.push(1),t.push(t[t.length-1])),[t,e]},linear:function(t,e,r,n,a,i,s){var p,m,v,_,y,w,C,I,A,R,b,M=t.length;if(i=i||0,0>i&&(i+=c),i>c&&(i-=c),A=l(u(i)),R=l(h(i)),b=R*e+A*r,A/=b,R/=b,i>d&&f>=i)for(m=0,v=0,p=0;M>p;p+=4,m++){for(m>=e&&(m=0,v++),y=e-1-m,w=v,_=o(1,R*y+A*w),I=0;_>a[I];)++I;C=0===I?0:I-1,s(t,p,n[C],n[I],a[I]>a[C]?(_-a[C])/(a[I]-a[C]):_)}else if(i>f&&g>=i)for(m=0,v=0,p=0;M>p;p+=4,m++){for(m>=e&&(m=0,v++),y=e-1-m,w=r-1-v,_=o(1,R*y+A*w),I=0;_>a[I];)++I;C=0===I?0:I-1,s(t,p,n[C],n[I],a[I]>a[C]?(_-a[C])/(a[I]-a[C]):_)}else if(i>g&&c>i)for(m=0,v=0,p=0;M>p;p+=4,m++){for(m>=e&&(m=0,v++),y=m,w=r-1-v,_=o(1,R*y+A*w),I=0;_>a[I];)++I;C=0===I?0:I-1,s(t,p,n[C],n[I],a[I]>a[C]?(_-a[C])/(a[I]-a[C]):_)}else for(m=0,v=0,p=0;M>p;p+=4,m++){for(m>=e&&(m=0,v++),y=m,w=v,_=o(1,R*y+A*w),I=0;_>a[I];)++I;C=0===I?0:I-1,s(t,p,n[C],n[I],a[I]>a[C]?(_-a[C])/(a[I]-a[C]):_)}return t},linearPoint:function(e,r,a,i,s,p,m,v,_){var y,w,C,I,A,R,b;if(A=l(u(_)),R=l(h(_)),b=R*s+A*p,A/=b,R/=b,_>d&&f>=_){for(y=s-1-a,w=i,t=o(1,R*y+A*w),I=0;t>v[I];)++I;C=0===I?0:I-1,n(e,r,m[C],m[I],v[I]>v[C]?(t-v[C])/(v[I]-v[C]):t)}else if(_>f&&g>=_){for(y=s-1-a,w=p-1-i,t=o(1,R*y+A*w),I=0;t>v[I];)++I;C=0===I?0:I-1,n(e,r,m[C],m[I],v[I]>v[C]?(t-v[C])/(v[I]-v[C]):t)}else if(_>g&&c>_){for(y=a,w=p-1-i,t=o(1,R*y+A*w),I=0;t>v[I];)++I;C=0===I?0:I-1,n(e,r,m[C],m[I],v[I]>v[C]?(t-v[C])/(v[I]-v[C]):t)}else{for(y=a,w=i,t=o(1,R*y+A*w),I=0;t>v[I];)++I;C=0===I?0:I-1,n(e,r,m[C],m[I],v[I]>v[C]?(t-v[C])/(v[I]-v[C]):t)}return e},radial:function(t,e,r,n,i,s,l,u,h,f){var c,d,g,p,m,v,_,y,w=t.length;for(s=s||0,l=l||0,u=u||1,h=h||1,h>u?(u/=h,h=1):u>h?(h/=u,u=1):(h=1,u=1),d=0,g=0,c=0;w>c;c+=4,d++){for(d>=e&&(d=0,g++),m=u*(d-s)/(e-s),v=h*(g-l)/(r-l),p=o(1,a(m*m+v*v)),y=0;p>i[y];)++y;_=0===y?0:y-1,f(t,c,n[_],n[y],i[y]>i[_]?(p-i[_])/(i[y]-i[_]):p)}return t},radialPoint:function(t,e,r,i,s,l,u,h,f,c,d,g){var p,m,v,_,y;for(m=d*(r-f)/(s-f),v=g*(i-c)/(l-c),p=o(1,a(m*m+v*v)),y=0;p>h[y];)++y;return _=0===y?0:y-1,n(t,e,u[_],u[y],h[y]>h[_]?(p-h[_])/(h[y]-h[_]):p),t}},A.Blend={normal:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=d,s=g,l=p,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},lighten:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=h>d?h:d,s=f>g?f:g,l=c>p?c:p,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},darken:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=h>d?d:h,s=f>g?g:f,l=c>p?p:c,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},multiply:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=h*d*.003921568627451,s=f*g*.003921568627451,l=c*p*.003921568627451,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},average:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=.5*(h+d),s=.5*(f+g),l=.5*(c+p),h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},add:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=h+d,s=f+g,l=c+p,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},subtract:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=255>h+d?0:h+d-255,s=255>f+g?0:f+g-255,l=255>c+p?0:c+p-255,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},difference:function(t,e,r,n,a,i){var o,s,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];o=l(g-f),s=l(p-c),u=l(m-d),f+=h*(o-f),c+=h*(s-c),d+=h*(u-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},negation:function(t,e,r,n,a,i){var o,s,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];o=255-l(255-g-f),s=255-l(255-p-c),u=255-l(255-m-d),f+=h*(o-f),c+=h*(s-c),d+=h*(u-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},screen:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=255-((255-d)*(255-h)>>8),s=255-((255-g)*(255-f)>>8),l=255-((255-p)*(255-c)>>8),h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},exclusion:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=d+h-2*d*h*.003921568627451,s=g+f-2*g*f*.003921568627451,l=p+c-2*p*c*.003921568627451,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},overlay:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=128>h?2*d*h*.003921568627451:255-2*(255-d)*(255-h)*.003921568627451,s=128>f?2*g*f*.003921568627451:255-2*(255-g)*(255-f)*.003921568627451,o=128>c?2*p*c*.003921568627451:255-2*(255-p)*(255-c)*.003921568627451,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},softlight:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=128>h?2*((d>>1)+64)*(.003921568627451*h):255-2*(255-((d>>1)+64))*(255-h)*.003921568627451,s=128>f?2*((g>>1)+64)*(.003921568627451*f):255-2*(255-((g>>1)+64))*(255-f)*.003921568627451,l=128>c?2*((p>>1)+64)*(.003921568627451*c):255-2*(255-((p>>1)+64))*(255-c)*.003921568627451,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},hardlight:function(t,e,r,n,a,i){var o,s,l,u=a*e[n+3]*.003921568627451,h=t[r],f=t[r+1],c=t[r+2],d=e[n],g=e[n+1],p=e[n+2];o=128>d?2*h*d*.003921568627451:255-2*(255-h)*(255-d)*.003921568627451,s=128>g?2*f*g*.003921568627451:255-2*(255-f)*(255-g)*.003921568627451,l=128>p?2*c*p*.003921568627451:255-2*(255-c)*(255-p)*.003921568627451,h+=u*(o-h),f+=u*(s-f),c+=u*(l-c),i&&(h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c),t[r]=0|h,t[r+1]=0|f,t[r+2]=0|c},colordodge:function(t,e,r,n,a,i){var s,l,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];s=255===f?f:o(255,(g<<8)/(255-f)),l=255===c?c:o(255,(p<<8)/(255-c)),u=255===d?d:o(255,(m<<8)/(255-d)),f+=h*(s-f),c+=h*(l-c),d+=h*(u-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},colorburn:function(t,e,r,n,a,i){var o,l,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];o=0===f?f:s(0,255-(255-g<<8)/f),l=0===c?c:s(0,255-(255-p<<8)/c),u=0===d?d:s(0,255-(255-m<<8)/d),f+=h*(o-f),c+=h*(l-c),d+=h*(u-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},linearlight:function(t,e,r,n,a,i){var o,s,l,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];128>f?(u=2*f,o=255>u+g?0:u+g-255):(u=2*(f-128),o=u+g),128>c?(u=2*c,s=255>u+p?0:u+p-255):(u=2*(c-128),s=u+p),128>d?(u=2*d,l=255>u+m?0:u+m-255):(u=2*(d-128),l=u+m),f+=h*(o-f),c+=h*(s-c),d+=h*(l-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},reflect:function(t,e,r,n,a,i){var s,l,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];s=255===f?f:o(255,g*g/(255-f)),l=255===c?c:o(255,p*p/(255-c)),u=255===d?d:o(255,m*m/(255-d)),f+=h*(s-f),c+=h*(l-c),d+=h*(u-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},glow:function(t,e,r,n,a,i){var s,l,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];s=255===g?g:o(255,f*f/(255-g)),l=255===p?p:o(255,c*c/(255-p)),u=255===m?m:o(255,d*d/(255-m)),f+=h*(s-f),c+=h*(l-c),d+=h*(u-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},phoenix:function(t,e,r,n,a,i){var l,u,h,f=a*e[n+3]*.003921568627451,c=t[r],d=t[r+1],g=t[r+2],p=e[n],m=e[n+1],v=e[n+2];l=o(p,c)-s(p,c)+255,u=o(m,d)-s(m,d)+255,h=o(v,g)-s(v,g)+255,c+=f*(l-c),d+=f*(u-d),g+=f*(h-g),i&&(c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d,g=0>g?0:g>255?255:g),t[r]=0|c,t[r+1]=0|d,t[r+2]=0|g},vividlight:function(t,e,r,n,a,i){var l,u,h,f,c=a*e[n+3]*.003921568627451,d=t[r],g=t[r+1],p=t[r+2],m=e[n],v=e[n+1],_=e[n+2];128>d?(f=2*d,l=0===f?f:s(0,255-(255-m<<8)/f)):(f=2*(d-128),l=255===f?f:o(255,(m<<8)/(255-f))),128>g?(f=2*g,u=0===f?f:s(0,255-(255-v<<8)/f)):(f=2*(g-128),u=255===f?f:o(255,(v<<8)/(255-f))),128>p?(f=2*p,h=0===f?f:s(0,255-(255-_<<8)/f)):(f=2*(g-128),h=255===f?f:o(255,(_<<8)/(255-f))),d+=c*(l-d),g+=c*(u-g),p+=c*(h-p),i&&(d=0>d?0:d>255?255:d,g=0>g?0:g>255?255:g,p=0>p?0:p>255?255:p),t[r]=0|d,t[r+1]=0|g,t[r+2]=0|p},pinlight:function(t,e,r,n,a,i){var o,s,l,u,h=a*e[n+3]*.003921568627451,f=t[r],c=t[r+1],d=t[r+2],g=e[n],p=e[n+1],m=e[n+2];128>f?(u=2*f,o=u>g?u:g):(u=2*(f-128),o=u>g?g:u),128>c?(u=2*c,s=u>p?u:p):(u=2*(f-128),s=u>p?p:u),128>d?(u=2*d,l=u>m?u:m):(u=2*(d-128),l=u>m?m:u),f+=h*(o-f),c+=h*(s-c),d+=h*(l-d),i&&(f=0>f?0:f>255?255:f,c=0>c?0:c>255?255:c,d=0>d?0:d>255?255:d),t[r]=0|f,t[r+1]=0|c,t[r+2]=0|d},hardmix:function(t,e,r,n,a,i){var l,u,h,f,c=a*e[n+3]*.003921568627451,d=t[r],g=t[r+1],p=t[r+2],m=e[n],v=e[n+1],_=e[n+2];128>d?(f=2*d,l=0===f?f:s(0,255-(255-m<<8)/f)):(f=2*(d-128),l=255===f?f:o(255,(m<<8)/(255-f))),l=128>l?0:255,128>g?(f=2*g,u=0===f?f:s(0,255-(255-v<<8)/f)):(f=2*(g-128),u=255===f?f:o(255,(v<<8)/(255-f))),u=128>u?0:255,128>p?(f=2*p,h=0===f?f:s(0,255-(255-_<<8)/f)):(f=2*(p-128),h=255===f?f:o(255,(_<<8)/(255-f))),h=128>h?0:255,d+=c*(l-d),g+=c*(u-g),p+=c*(h-p),i&&(d=0>d?0:d>255?255:d,g=0>g?0:g>255?255:g,p=0>p?0:p>255?255:p),t[r]=0|d,t[r+1]=0|g,t[r+2]=0|p}},A.Blend.lineardodge=A.Blend.add,A.Blend.linearburn=A.Blend.subtract,A.Combine=A.Blend}(a),!function(t,e){var r,n,a=t.ImArray,i=t.Util.Image,o=t.Color,s=Math.min,l=Math.max,u=t.Interpolation.bilinear,h=i.get_data,f=i.set_data,c=i.fill;n=t.Class({constructor:function(t){var e=this;e._cnv=t,e._transform={scale:[1,1],translate:[0,0],rotate:[0,0]},e._data=null},_cnv:null,_w:0,_h:0,_transform:null,_data:null,fillStyle:null,dispose:function(){var t=this;return t._cnv=null,t._data=null,t._transform=null,t},fillRect:function(t,e,r,n){var a,i=this,s=i._w,l=i._h,u=i.fillStyle;null==t&&(t=0),null==e&&(e=0),null==r&&(r=s),null==n&&(n=l),u===+u?a=o.Color2RGBA(u,[0,0,0,0],0):u&&u.substr?(a=o.fromString(u).toRGB(!1),a[3]=255*a[3]|0):a=u&&2<u.length?u:[0,0,0,0],c(i._data,s,l,a,t,e,t+r-1,e+n-1)},clearRect:function(t,e,r,n){var a=this,i=a._w,o=a._h;null==t&&(t=0),null==e&&(e=0),null==r&&(r=i),null==n&&(n=o),c(a._data,i,o,[0,0,0,0],t,e,t+r-1,e+n-1)},drawImage:function(t,e,r,n,i,o,s,l,c){var d=this,g=d._w,p=d._h,m=t._ctx._w,v=t._ctx._h,_=t._ctx._data,y=arguments.length;3===y?(d._data||(g=d._w=m,p=d._h=v,d._data=new a(g*p<<2)),o=e,s=r,f(d._data,g,p,_,m,v,0,0,m-1,v-1,o,s)):5===y?(d._data||(g=d._w=n,p=d._h=i,d._data=new a(g*p<<2)),o=e,s=r,l=n,c=i,m===l&&v===c?f(d._data,g,p,_,l,c,0,0,l-1,c-1,o,s):f(d._data,g,p,u(_,m,v,l,c),l,c,0,0,l-1,c-1,o,s)):(d._data||(g=d._w=l,p=d._h=c,d._data=new a(g*p<<2)),n===l&&i===c?f(d._data,g,p,h(_,m,v,e,r,e+n-1,r+i-1,!0),l,c,0,0,l-1,c-1,o,s):f(d._data,g,p,u(h(_,m,v,e,r,e+n-1,r+i-1,!0),n,i,l,c),l,c,0,0,l-1,c-1,o,s))},createImageData:function(t,e){var r=this;return r._data=new a(t*e<<2),r._w=t,r._h=e,r},putImageData:function(t,e,r){var n=this,a=n._w,i=n._h,o=t.width,s=t.height;null==e&&(e=0),null==r&&(r=0),f(n._data,a,i,t.data,o,s,0,0,o-1,s-1,e,r)},getImageData:function(t,e,r,n){var a,i,o,u,f=this,c=f._w,d=f._h;return null==t&&(t=0),null==e&&(e=0),null==r&&(r=c),null==n&&(n=d),a=l(0,s(t,r-1,c-1)),i=l(0,s(e,n-1,d-1)),o=s(a+r-1,r-1,c-1),u=s(i+n-1,n-1,d-1),{data:h(f._data,c,d,a,i,o,u),width:o-a+1,height:u-i+1}},scale:function(t,e){var r=this;return r._transform.scale[0]=t,r._transform.scale[1]=e,r},translate:function(t,e){var r=this;return r._transform.translate[0]=t,r._transform.translate[1]=e,r}}),r=t.CanvasProxy=t.Class({constructor:function(t,e){var r=this;r.width=t||0,r.height=e||0,r.style={},r._ctx=null},_ctx:null,width:null,height:null,style:null,dispose:function(){var t=this;return t.width=null,t.height=null,t.style=null,t._ctx&&(t._ctx.dispose(),t._ctx=null),t},getContext:function(e,r){var a=this;return-1<e.indexOf("webgl")?t.GL(a,r):(a._ctx||(a._ctx=new n(a)),a._ctx)},toDataURL:function(t){return""}}),t.Canvas=function(e,n){var a=t.Browser.isNode?new r:document.createElement("canvas");return e=e||0,n=n||0,a.style.width=e+"px",a.style.height=n+"px",a.width=e*t.devicePixelRatio,a.height=n*t.devicePixelRatio,a};var d=null;t.GL=t.Browser.isNode?function(t,e){return null}:function(t,e){e=e||{depth:!1,alpha:!0,premultipliedAlpha:!1,antialias:!0,stencil:!1,preserveDrawingBuffer:!1};var r=null;if(d)r=t.getContext(d,e);else{var n,a=["webgl2","experimental-webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"],i=a.length;for(n=0;i>n;++n){try{r=t.getContext(a[n],e)}catch(o){r=null}if(r){d=a[n];break}}}return r}}(a),!function(t,e){function r(t,e,r,n){return n=n||P,n&k&&(t.width=e,t.oCanvas.style.width=e+"px",t.oCanvas.width=e*o,t._restorable&&(t.iCanvas.style.width=t.oCanvas.style.width,t.iCanvas.width=t.oCanvas.width),t.tmpCanvas&&(t.tmpCanvas.style.width=t.oCanvas.style.width,t.tmpCanvas.width=t.oCanvas.width)),n&U&&(t.height=r,t.oCanvas.style.height=r+"px",t.oCanvas.height=r*o,t._restorable&&(t.iCanvas.style.height=t.oCanvas.style.height,t.iCanvas.height=t.oCanvas.height),t.tmpCanvas&&(t.tmpCanvas.style.height=t.oCanvas.style.height,t.tmpCanvas.height=t.oCanvas.height)),t}function n(t,e){var r=t.width,n=t.height;return e=e||255,t._restorable&&e&x&&t._refresh&x&&(t.iData=t.ictx.getImageData(0,0,r,n),t._refresh&=~x),e&S&&t._refresh&S&&(t.oData=t.octx.getImageData(0,0,r,n),t._refresh&=~S),t}function a(t,e){if(t.selection){var r,n,a=t.selection,i=t.width-1,o=t.height-1,s=a[0],l=a[1],u=a[2],h=a[3];a[4]&&(s=I(s*i),l=I(l*o),u=I(u*i),h=I(a[3]*o)),r=u-s+1,n=h-l+1,e=e||255,t._restorable&&e&E&&t._refresh&E&&(t.iDataSel=t.ictx.getImageData(s,l,r,n),t._refresh&=~E),e&O&&t._refresh&O&&(t.oDataSel=t.octx.getImageData(s,l,r,n),t._refresh&=~O)}return t}var i="prototype",o=t.devicePixelRatio,s=t.ImArray,l=t.ImArrayCopy,u=(t.Array32F,t.CHANNEL),h=t.FORMAT,f=t.MIME,c=0,d=t.Color,g=d.Gradient,p=t.Util.Image,m=t.Util.Filter,v=t.Canvas,_=t.CanvasProxy,y=t.Util.Array,w=y.arrayset,C=y.subarray,I=(Math.min,Math.floor),A=1<<u.R,R=1<<u.G,b=1<<u.B,M=1<<u.A,D=A|R|b|M,x=1,S=2,E=4,O=8,L=16,T=32,G=64,k=2,U=4,P=k|U,F=E|O,B=x|S,H=~F,N=~L,Y=~T;p.scale=p.resize=t.Interpolation.bilinear;var K=t.Image=t.Class({name:"Image",constructor:function j(t){var e=this,r=0,n=0;return e instanceof j?(e.id=++c,e.width=r,e.height=n,e.tmpCanvas=null,e.iCanvas=v(r,n),e.oCanvas=v(r,n),e.iData=null,e.iDataSel=null,e.oData=null,e.oDataSel=null,e.ictx=e.iCanvas.getContext("2d"),e.octx=e.oCanvas.getContext("2d"),e.domElement=e.oCanvas,e._gl=null,e._restorable=!0,e.gray=!1,e.selection=null,e._histogram=[null,null,null,null],e._integral=[null,null,null,null],e._spectrum=[null,null,null,null],e._refresh=0,e._hstRefresh=0,e._intRefresh=0,e._spcRefresh=0,e.nref=0,void(t&&e.image(t))):new j(t)},id:null,width:0,height:0,gray:!1,selection:null,tmpCanvas:null,iCanvas:null,oCanvas:null,ictx:null,octx:null,iData:null,iDataSel:null,oData:null,oDataSel:null,domElement:null,_restorable:!0,_gl:e,_histogram:null,_integral:null,_spectrum:null,_refresh:0,_hstRefresh:0,_intRefresh:0,_spcRefresh:0,nref:0,dispose:function(){var t=this;return t.id=null,t.width=t.height=null,t.selection=t.gray=null,t.iData=t.iDataSel=t.oData=t.oDataSel=null,t.domElement=t.tmpCanvas=t.iCanvas=t.oCanvas=t.ictx=t.octx=null,t._restorable=t._gl=null,t._histogram=t._integral=t._spectrum=null,t._hstRefresh=t._intRefresh=t._spcRefresh=t._refresh=t.nref=null,t},clone:function(t){return new K(!0===t?this.iCanvas:this.oCanvas)},gl:function(r){return e===this._gl&&(this._gl=t.GL(this.oCanvas,r)),this._gl},grayscale:function(t){var e=this;return arguments.length?(e.gray=!!t,e):e.gray},restorable:function(t){var e=this;return arguments.length||(t=!0),e._restorable=!!t,e},apply:function(t,e){return t.apply(this,this,e||null),this},apply2:function(t,e,r){return t.apply(this,e,r||null),this},select:function(t,e,r,n,a){var i=this,o=arguments.length;return!1===t?(i.selection=null,i.iDataSel=null,i.oDataSel=null,i._refresh&=H):(1>o&&(t=0),2>o&&(e=0),3>o&&(r=1),4>o&&(n=1),i.selection=a?[0>t?0:t,0>e?0:e,0>r?0:r,0>n?0:n,0]:[0>t?0:t>1?1:t,0>e?0:e>1?1:e,0>r?0:r>1?1:r,0>n?0:n>1?1:n,1],i._refresh|=F),i.nref++,i},deselect:function(){return this.select(!1)},store:function(){var t=this;return t._restorable&&(t.ictx.drawImage(t.oCanvas,0,0),t._refresh|=x,t.selection&&(t._refresh|=E),t.nref++),t},restore:function(){var t=this;return t._restorable&&(t.octx.drawImage(t.iCanvas,0,0),t._refresh|=S|L|T|G,t._hstRefresh=D,t._intRefresh=D,t._spcRefresh=D,t.selection&&(t._refresh|=O),t.nref++),t},dimensions:function(t,e,n){var a=this;return a._refresh|=B|L|T|G,a._hstRefresh=D,a._intRefresh=D,a._spcRefresh=D,a.selection&&(a._refresh|=F),a.nref++,r(a,t,e,P),a},setDimensions:null,scale:function(t,e){var r=this;if(t=t||1,e=e||t,1===t&&1===e)return r;r.tmpCanvas=r.tmpCanvas||v(r.width,r.height);var n=r.tmpCanvas.getContext("2d"),a=r.width,i=r.height;return n.scale(t,e),a=r.width=t*a+.5|0,i=r.height=e*i+.5|0,n.drawImage(r.oCanvas,0,0),r.oCanvas.style.width=a+"px",r.oCanvas.style.height=i+"px",r.oCanvas.width=a*o,r.oCanvas.height=i*o,r.octx.drawImage(r.tmpCanvas,0,0),r._restorable&&(n.drawImage(r.iCanvas,0,0),r.iCanvas.style.width=r.oCanvas.style.width,r.iCanvas.style.height=r.oCanvas.style.height,r.iCanvas.width=r.oCanvas.width,r.iCanvas.height=r.oCanvas.height,r.ictx.drawImage(r.tmpCanvas,0,0)),r.tmpCanvas.width=r.oCanvas.width,r.tmpCanvas.height=r.oCanvas.height,r._refresh|=B|L|T|G,r._hstRefresh=D,r._intRefresh=D,r._spcRefresh=D,r.selection&&(r._refresh|=F),r.nref++,r},flipHorizontal:function(){var t=this;t.tmpCanvas=t.tmpCanvas||v(t.width,t.height);var e=t.tmpCanvas.getContext("2d");return e.translate(t.width,0),e.scale(-1,1),e.drawImage(t.oCanvas,0,0),t.octx.drawImage(t.tmpCanvas,0,0),t._restorable&&(e.drawImage(t.iCanvas,0,0),
t.ictx.drawImage(t.tmpCanvas,0,0)),t._refresh|=B|T|G,t._intRefresh=D,t.selection&&(t._refresh|=F),t.nref++,t},flipVertical:function(){var t=this;t.tmpCanvas=t.tmpCanvas||v(t.width,t.height);var e=t.tmpCanvas.getContext("2d");return e.translate(0,t.height),e.scale(1,-1),e.drawImage(t.oCanvas,0,0),t.octx.drawImage(t.tmpCanvas,0,0),t._restorable&&(e.drawImage(t.iCanvas,0,0),t.ictx.drawImage(t.tmpCanvas,0,0)),t._refresh|=B|T|G,t._intRefresh=D,t.selection&&(t._refresh|=F),t.nref++,t},clear:function(){var t=this,e=t.width,r=t.height;return e&&r&&(t._restorable&&t.ictx.clearRect(0,0,e,r),t.octx.clearRect(0,0,e,r),t._refresh|=B|L|T|G,t._hstRefresh=D,t._intRefresh=D,t._spcRefresh=D,t.selection&&(t._refresh|=F),t.nref++),t},crop:function(t,e,r,n){var a,i,s,l,u,h,f,c,d=this,g=d.selection,p=d.width,m=d.height;if(arguments.length)u=t,h=e,f=r-t+1,c=n-e+1;else{if(!g)return d;a=I(g[0]*(p-1)),i=I(g[1]*(m-1)),s=I(g[2]*(p-1))-a+1,l=I(g[3]*(m-1))-i+1,u=a,h=i,f=s,c=l,g[0]=0,g[1]=0,g[2]=1,g[3]=1}d.tmpCanvas=d.tmpCanvas||v(d.width,d.height);var _=d.tmpCanvas.getContext("2d");return _.drawImage(d.oCanvas,0,0,p,m,u,h,f,c),d.oCanvas.style.width=f+"px",d.oCanvas.style.height=c+"px",d.oCanvas.width=f*o,d.oCanvas.height=c*o,d.octx.drawImage(d.tmpCanvas,0,0),d._restorable&&(_.drawImage(d.iCanvas,0,0,p,m,u,h,f,c),d.iCanvas.style.width=d.oCanvas.style.width,d.iCanvas.style.height=d.oCanvas.style.height,d.iCanvas.width=d.oCanvas.width,d.iCanvas.height=d.oCanvas.height,d.ictx.drawImage(d.tmpCanvas,0,0)),d.tmpCanvas.width=d.oCanvas.width,d.tmpCanvas.height=d.oCanvas.height,d._refresh|=B|L|T|G,d._hstRefresh=D,d._intRefresh=D,d._spcRefresh=D,g&&(d._refresh|=F),d.nref++,d},fill:function(t,r,n,a,i){var o,s,l,u,h=this,f=h.selection,c=h.width,d=h.height;f?(o=I(f[0]*(c-1)),s=I(f[1]*(d-1)),l=I(f[2]*(c-1))-o+1,u=I(f[3]*(d-1))-s+1):(o=0,s=0,l=c,u=d),e===r&&(r=o),e===n&&(n=s),e===a&&(a=l),e===i&&(i=u),a&&!c&&i&&!d&&h.createImageData(a,i);var g=h.ictx,p=h.octx;return t=t||0,h._restorable&&(g.fillStyle=t,g.fillRect(r,n,a,i)),p.fillStyle=t,p.fillRect(r,n,a,i),h._refresh|=B|L|T|G,h._hstRefresh=D,h._intRefresh=D,h._spcRefresh=D,f&&(h._refresh|=F),h.nref++,h},getData:function(t){var e,r=this;return r._restorable&&!t?(r._refresh&x&&n(r,x),e=r.iData):(r._refresh&S&&n(r,S),e=r.oData),new l(e.data)},getSelectedData:function(t){var e,r=this;return r.selection?r._restorable&&!t?(r._refresh&E&&a(r,E),e=r.iDataSel):(r._refresh&O&&a(r,O),e=r.oDataSel):r._restorable&&!t?(r._refresh&x&&n(r,x),e=r.iData):(r._refresh&S&&n(r,S),e=r.oData),[new l(e.data),e.width,e.height,2]},setData:y.hasArrayset?function(t){var e=this;return e._refresh&S&&n(e,S),e.oData.data.set(t),e.octx.putImageData(e.oData,0,0),e._refresh|=L|T|G,e._hstRefresh=D,e._intRefresh=D,e._spcRefresh=D,e.selection&&(e._refresh|=O),e.nref++,e}:function(t){var e=this;return e._refresh&S&&n(e,S),w(e.oData.data,t),e.octx.putImageData(e.oData,0,0),e._refresh|=L|T|G,e._hstRefresh=D,e._intRefresh=D,e._spcRefresh=D,e.selection&&(e._refresh|=O),e.nref++,e},setSelectedData:y.hasArrayset?function(t){var e=this,r=e.selection;if(r){var i=r[0],o=r[1];r[4]&&(i=I(i*(e.width-1)),o=I(o*(e.height-1))),e._refresh&O&&a(e,O),e.oDataSel.data.set(t),e.octx.putImageData(e.oDataSel,i,o),e._refresh|=S}else e._refresh&S&&n(e,S),e.oData.data.set(t),e.octx.putImageData(e.oData,0,0);return e._refresh|=L|T|G,e._hstRefresh=D,e._intRefresh=D,e._spcRefresh=D,e.nref++,e}:function(t){var e=this,r=e.selection;if(r){var i=r[0],o=r[1];r[4]&&(i=I(i*(e.width-1)),o=I(o*(e.height-1))),e._refresh&O&&a(e,O),w(e.oDataSel.data,t),e.octx.putImageData(e.oDataSel,i,o),e._refresh|=S}else e._refresh&S&&n(e,S),w(e.oData.data,t),e.octx.putImageData(e.oData,0,0);return e._refresh|=L|T|G,e._hstRefresh=D,e._intRefresh=D,e._spcRefresh=D,e.nref++,e},createImageData:function(t,e){var n,a,i=this;return r(i,t,e,P),i._restorable&&(n=i.ictx=i.iCanvas.getContext("2d"),n.createImageData(t,e)),a=i.octx=i.oCanvas.getContext("2d"),a.createImageData(t,e),i._refresh|=B,i.selection&&(i._refresh|=F),i.nref++,i},image:y.hasArrayset?function(t){if(!t)return this;var e,a,i,o,s,l,u,h=this;return t instanceof K&&(t=t.oCanvas),s="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement,l="undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||t instanceof _,u="undefined"!=typeof Image&&t instanceof Image,s?(i=t.videoWidth,o=t.videoHeight):(i=t.width,o=t.height),u||l||s?(r(h,i,o,P),h._restorable&&(e=h.ictx=h.iCanvas.getContext("2d"),e.drawImage(t,0,0)),a=h.octx=h.oCanvas.getContext("2d"),a.drawImage(t,0,0),h._refresh|=B):(h.oData||(h.createImageData(i,o),n(h,B)),h._restorable&&(e=h.ictx=h.iCanvas.getContext("2d"),h.iData.data.set(t.data),e.putImageData(h.iData,0,0)),a=h.octx=h.oCanvas.getContext("2d"),h.oData.data.set(t.data),a.putImageData(h.oData,0,0)),h._refresh|=L|T|G,h._hstRefresh=D,h._intRefresh=D,h._spcRefresh=D,h.selection&&(h._refresh|=F),h.nref++,h}:function(t){if(!t)return this;var e,a,i,o,s,l,u,h=this;return t instanceof K&&(t=t.oCanvas),s="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement,l="undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||t instanceof _,u="undefined"!=typeof Image&&t instanceof Image,s?(i=t.videoWidth,o=t.videoHeight):(i=t.width,o=t.height),u||l||s?(r(h,i,o,P),h._restorable&&(e=h.ictx=h.iCanvas.getContext("2d"),e.drawImage(t,0,0)),a=h.octx=h.oCanvas.getContext("2d"),a.drawImage(t,0,0)):(h.oData||(h.createImageData(i,o),n(h,B)),h._restorable&&(e=h.ictx=h.iCanvas.getContext("2d"),w(h.iData.data,t.data),e.putImageData(h.iData,0,0)),a=h.octx=h.oCanvas.getContext("2d"),w(h.oData.data,t.data),a.putImageData(h.oData,0,0)),h._refresh|=L|T|G,h._hstRefresh=D,h._intRefresh=D,h._spcRefresh=D,h.selection&&(h._refresh|=F),h.nref++,h},setImage:null,getPixel:function(t,e){var r,a=this,i=a.width,o=a.height;return 0>t||t>=i||0>e||e>=o?null:(a._refresh&S&&n(a,S),r=(e*i+t|0)<<2,C(a.oData.data,r,r+4))},setPixel:function(t,e,r){var n=this,a=n.width,i=n.height;return 0>t||t>=a||0>e||e>=i?n:(n.octx.putImageData(r,t,e),n._refresh|=S|L|T|G,n._hstRefresh=D,n._intRefresh=D,n._spcRefresh=D,n.selection&&(n._refresh|=O),n.nref++,n)},getPixelData:function(){return this._refresh&S&&n(this,S),this.oData},setPixelData:function(t){var e=this;return e.octx.putImageData(t,0,0),e._refresh|=S|L|T|G,e._hstRefresh=D,e._intRefresh=D,e._spcRefresh=D,e.selection&&(e._refresh|=O),e.nref++,e},integral:function(t){var e,r=this,n=r.gray,a=m.integral,i=r._integral;if(null==t){if(r._refresh&T){var o,s=r.getPixelData().data,l=r.width,u=r.height;i[0]=o=a(s,l,u,2,0),i[1]=n?o:a(s,l,u,2,1),i[2]=n?o:a(s,l,u,2,2),i[3]=null,r._intRefresh=0,r._refresh&=Y}}else t=t||0,e=1<<t,(r._refresh&T||r._intRefresh&e)&&(!n||r._intRefresh&A?!n||r._intRefresh&R?!n||r._intRefresh&b?i[t]=a(r.getPixelData().data,r.width,r.height,2,t):i[t]=i[2]:i[t]=i[1]:i[t]=i[0],r._intRefresh&=~e,r._refresh&=Y);return null==t?i:i[t||0]},sat:null,histogram:function(t,e){var r,n=this,a=n.gray,i=m.histogram,o=n._histogram;if(null==t){if(n._refresh&L){var s,l=n.getPixelData().data,u=n.width,h=n.height;o[0]=s=i(l,u,h,2,0,e),o[1]=a?s:i(l,u,h,2,1,e),o[2]=a?s:i(l,u,h,2,2,e),o[3]=null,n._hstRefresh=0,n._refresh&=N}}else t=t||0,r=1<<t,(n._refresh&L||n._hstRefresh&r)&&(!a||n._hstRefresh&A?!a||n._hstRefresh&R?!a||n._hstRefresh&b?o[t]=i(n.getPixelData().data,n.width,n.height,2,t,e):o[t]=o[2]:o[t]=o[1]:o[t]=o[0],n._hstRefresh&=~r,n._refresh&=N);return null==t?o:o[t||0]},spectrum:function(t){var e=this,r=e._spectrum;return null==t?r:r[t||0]},fft:null,linearGradient:function(t,e,r,n){var a=this,i=a.width,o=a.height,l=g.stops(t,e);return a.setData(g.linear(new s(i*o<<2),i,o,l[0],l[1],r,n||g.interpolate)),a},radialGradient:function(t,e,r,n,a,i,o){var l=this,u=l.width,h=l.height,f=g.stops(t,e);return l.setData(g.radial(new s(u*h<<2),u,h,f[0],f[1],r,n,a,i,o||g.interpolate)),l},perlinNoise:function(t,e,r,n,a,i,o,l,u,h){var f=this,c=f.width,d=f.height;return p.perlin&&(t&&p.perlin.seed(t),f.setData(p.perlin(new s(c*d<<2),c,d,e,r,n,a,i,o,l,u,h)),f.gray=!!r),f},toImage:function(t,e){t=t||0,e=e||1;var r=this.oCanvas,n=null,a=16&t;if(n=h.JPG===a?r.toDataURL(f.JPG,e):h.GIF===a?r.toDataURL(f.GIF,e):r.toDataURL(f.PNG,e),t&h.IMAGE){var i=new Image;return i.src=n,i}return n},toString:function(){return"[FILTER Image: "+this.name+"]"}});K[i].setImage=K[i].image,K[i].setDimensions=K[i].dimensions,K[i].sat=K[i].integral,K[i].fft=K[i].spectrum,K.LinearGradient=K.Gradient=function(t,e,r,n,a,i){return(new K).restorable(!1).createImageData(t,e).linearGradient(r,n,a,i||g.interpolate)},K.RadialGradient=function(t,e,r,n,a,i,o,s,l){return(new K).restorable(!1).createImageData(t,e).radialGradient(r,n,a,i,o,s,l||g.interpolate)},K.PerlinNoise=function(t,e,r,n,a,i,o,s,l,u,h,f){return(new K).restorable(!1).createImageData(t,e).perlinNoise(r,n,a,i,o,s,l,u,h,f)};var W=t.ScaledImage=t.Class(K,{name:"ScaledImage",constructor:function X(t,e,r){var n=this;return n instanceof X?(n.scaleX=t||1,n.scaleY=e||n.scaleX,void n.$super("constructor",r)):new X(t,e,r)},scaleX:1,scaleY:1,dispose:function(){var t=this;return t.scaleX=null,t.scaleY=null,t.$super("dispose"),t},clone:function(t){var e=this;return new W(e.scaleX,e.scaleY,!0===t?e.iCanvas:e.oCanvas)},setScale:function(t,e){var r=this,n=arguments.length;return n>0&&null!=t&&(r.scaleX=t,r.scaleY=t),n>1&&null!=e&&(r.scaleY=e),r},image:function(t){if(!t)return this;var e,n,a,i,o,s,l,u,h,f=this,c=f.scaleX,d=f.scaleY;return t instanceof K&&(t=t.oCanvas),l="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement,u="undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||t instanceof _,h="undefined"!=typeof Image&&t instanceof Image,l?(a=t.videoWidth,i=t.videoHeight):(a=t.width,i=t.height),(h||u||l)&&(o=c*a+.5|0,s=d*i+.5|0,r(f,o,s,P),f._restorable&&(e=f.ictx=f.iCanvas.getContext("2d"),e.drawImage(t,0,0,a,i,0,0,o,s)),n=f.octx=f.oCanvas.getContext("2d"),n.drawImage(t,0,0,a,i,0,0,o,s),f._refresh|=B|L|T|G,f._hstRefresh=D,f._intRefresh=D,f._spcRefresh=D,f.selection&&(f._refresh|=F),f.nref++),f}});W[i].setImage=W[i].image}(a),!function(t,e){function r(t){var e,r;for(t>0&&1>t&&(t*=65536),t=f(t),256>t&&(t|=t<<8),r=0;256>r;r++)e=1&r?d[r]^255&t:d[r]^t>>8&255,g[r]=g[r+256]=e}function n(t,e,r){var n=7&t,a=4>n?e:r,i=4>n?r:e;return(1&n?-a:a)+(2&n?-2*i:2*i)}function a(t,e){var r,a,i,o,s,l=.366025403,u=.211324865,h=(t+e)*l,c=t+h,d=e+h,p=f(c),m=f(d),v=(p+m)*u,_=p-v,y=m-v,w=t-_,C=e-y;w>C?(o=1,s=0):(o=0,s=1);var I=w-o+u,A=C-s+u,R=w-1+2*u,b=C-1+2*u,M=255&p,D=255&m,x=.5-w*w-C*C;0>x?r=0:(x*=x,r=x*x*n(g[M+g[D]],w,C));var S=.5-I*I-A*A;0>S?a=0:(S*=S,a=S*S*n(g[M+o+g[D+s]],I,A));var E=.5-R*R-b*b;return 0>E?i=0:(E*=E,i=E*E*n(g[M+1+g[D+1]],R,b)),40*(r+a+i)}function i(t){return t*t*t*(t*(6*t-15)+10)}function o(t,e,r){return e+t*(r-e)}function s(t,e){var r,a,s,l,u,h,c,d,p,m,v,_,y,w;return r=f(t),a=f(e),u=t-r,h=e-a,c=u-1,d=h-1,s=r+1&255,l=a+1&255,r=255&r,a=255&a,m=i(h),p=i(u),v=n(g[r+g[a]],u,h),_=n(g[r+g[l]],u,d),y=o(m,v,_),v=n(g[s+g[a]],c,h),_=n(g[s+g[l]],c,d),w=o(m,v,_),.507*o(p,y,w)}function l(t,e,r,n,a,i,o,s,l,u,h,f,c){var d,g,p,m,v=0,_=f,y=1,w=0;for(d=0;u>d;d++)g=(n+h[d][0])%i,p=(a+h[d][1])%o,v+=r(_*g*s,_*p*l)*y,_*=2,w+=y,y*=c;m=~~(255*(.5*v/w+.5)),t[e]=m,t[e+1]=m,t[e+2]=m,t[e+3]=255}function u(t,e,r,n,a,i,o,s,l,u,h,f,c){var d,g,p,m,v=0,_=f,y=1,w=0;for(d=0;u>d;d++)g=(n+h[d][0])%i,p=(a+h[d][1])%o,v+=r(_*g*s,_*p*l)*y,_*=2,w+=y,y*=c;m=~~(16777215*(.5*v/w+.5)),t[e]=m>>>16&255,t[e+1]=m>>>8&255,t[e+2]=255&m,t[e+3]=255}if(!t.Util.LOADED_PERLIN){t.Util.LOADED_PERLIN=!0;var h=t.Util.Image,f=(t.Image,Math.floor),c=(Math.sin,Math.cos,t.CONST.PI2,t.Array8U),d=new c([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180]),g=new c(d);h.perlin=function(t,e,r,n,i,o,h,f,c,d,g,p){var m,v,_,y,w,C,I=1/o,A=1/h,R=p?s:a,b=i?l:u,M=t.length,D=e>>>1,x=r>>>1;if(d=d||1,g=g||.5,f=f||1,c=c||[[0,0]],n)for(m=0,v=0,w=0;M>w;w+=4,m++)m>=e&&(m=0,v++),_=m>D?e-1-m:m,y=v>x?r-1-v:v,m>_||v>y?(C=y*e+_<<2,t[w]=t[C],t[w+1]=t[C+1],t[w+2]=t[C+2],t[w+3]=255):b(t,w,R,_,y,e,r,I,A,f,c,d,g);else for(m=0,v=0,w=0;M>w;w+=4,m++)m>=e&&(m=0,v++),b(t,w,R,m,v,e,r,I,A,f,c,d,g);return t},h.perlin.seed=r}}(a),a});